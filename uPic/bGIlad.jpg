<!doctype html>
<html lang="zh" data-ios="true" data-theme="light"><head><meta charSet="utf-8"/><title data-react-helmet="true">编译器具体实现中比较巧妙的思想有哪些？ - 知乎</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"/><meta name="renderer" content="webkit"/><meta name="force-rendering" content="webkit"/><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/><meta name="google-site-verification" content="FTeR0c8arOPKh8c5DYh_9uu98_zJbaWw53J-Sch9MTg"/><meta data-react-helmet="true" name="description" property="og:description" content="如题，注意是具体实现，而不是编译原理中的好思想！最好是一些比较精专的思想，而不是Hash、KMP等通用的…"/><meta data-react-helmet="true" name="keywords" content="算法,系统架构,数据结构,编译原理,编译器"/><link data-react-helmet="true" rel="apple-touch-icon" href="https://static.zhihu.com/heifetz/assets/apple-touch-icon-152.a53ae37b.png"/><link data-react-helmet="true" rel="apple-touch-icon" href="https://static.zhihu.com/heifetz/assets/apple-touch-icon-152.a53ae37b.png" sizes="152x152"/><link data-react-helmet="true" rel="apple-touch-icon" href="https://static.zhihu.com/heifetz/assets/apple-touch-icon-120.bbce8f18.png" sizes="120x120"/><link data-react-helmet="true" rel="apple-touch-icon" href="https://static.zhihu.com/heifetz/assets/apple-touch-icon-76.cbade8f9.png" sizes="76x76"/><link data-react-helmet="true" rel="apple-touch-icon" href="https://static.zhihu.com/heifetz/assets/apple-touch-icon-60.8f6c52aa.png" sizes="60x60"/><link rel="shortcut icon" type="image/x-icon" href="https://static.zhihu.com/heifetz/favicon.ico"/><link rel="search" type="application/opensearchdescription+xml" href="https://static.zhihu.com/heifetz/search.xml" title="知乎"/><link rel="dns-prefetch" href="//static.zhimg.com"/><link rel="dns-prefetch" href="//pic1.zhimg.com"/><link rel="dns-prefetch" href="//pic2.zhimg.com"/><link rel="dns-prefetch" href="//pic3.zhimg.com"/><link rel="dns-prefetch" href="//pic4.zhimg.com"/><style>
.u-safeAreaInset-top {
  height: constant(safe-area-inset-top) !important;
  height: env(safe-area-inset-top) !important;
  
}
.u-safeAreaInset-bottom {
  height: constant(safe-area-inset-bottom) !important;
  height: env(safe-area-inset-bottom) !important;
  
}
</style><link href="https://static.zhihu.com/heifetz/main.app.216a26f4.77fe76acfc2c6e42a3ec.css" rel="stylesheet"/><link href="https://static.zhihu.com/heifetz/main.question-routes.216a26f4.068bfdd19855de3114fc.css" rel="stylesheet"/><script defer="" crossorigin="anonymous" src="https://unpkg.zhimg.com/@cfe/sentry-script@latest/dist/init.js" data-sentry-config="{&quot;dsn&quot;:&quot;https://2d8d764432cc4f6fb3bc78ab9528299d@crash2.zhihu.com/1224&quot;,&quot;sampleRate&quot;:0.1,&quot;release&quot;:&quot;1710-1a380e91&quot;,&quot;ignoreErrorNames&quot;:[&quot;NetworkError&quot;,&quot;SecurityError&quot;],&quot;ignoreErrors&quot;:[&quot;origin message&quot;,&quot;Network request failed&quot;,&quot;Loading chunk&quot;,&quot;这个系统不支持该功能。&quot;,&quot;Can&#x27;t find variable: webkit&quot;,&quot;Can&#x27;t find variable: $&quot;,&quot;内存不足&quot;,&quot;out of memory&quot;,&quot;DOM Exception 18&quot;,&quot;The operation is insecure&quot;,&quot;[object Event]&quot;,&quot;[object FileError]&quot;,&quot;[object DOMError]&quot;,&quot;[object Object]&quot;,&quot;拒绝访问。&quot;,&quot;Maximum call stack size exceeded&quot;,&quot;UploadError&quot;,&quot;无法 fetch&quot;,&quot;draft-js&quot;,&quot;缺少 JavaScript 对象&quot;,&quot;componentWillEnter&quot;,&quot;componentWillLeave&quot;,&quot;componentWillAppear&quot;,&quot;getInlineStyleAt&quot;,&quot;getCharacterList&quot;],&quot;whitelistUrls&quot;:[&quot;static.zhihu.com&quot;]}"></script></head><body><div id="root"><div><div class="LoadingBar"></div><div><header role="banner" class="Sticky AppHeader" data-za-module="TopNavBar"><style data-emotion-css="qqgmyv">.css-qqgmyv{width:auto;max-width:1156px;min-width:1000px;padding-left:16px;padding-right:30px;}.css-qqgmyv .AppHeader-userInfo{margin-left:30px;width:auto;}.css-qqgmyv .AppHeader-TabsLink.is-active,.css-qqgmyv .AppHeader-TabsLink:hover{color:#121212;}</style><div class="AppHeader-inner css-qqgmyv"><a class="ZhihuLogoLink" href="//www.zhihu.com" aria-label="知乎"><svg viewBox="0 0 64 30" fill="#0066FF" width="64" height="30"><path d="M29.05 4.582H16.733V25.94h3.018l.403 2.572 4.081-2.572h4.815V4.582zm-5.207 18.69l-2.396 1.509-.235-1.508h-1.724V7.233h6.78v16.04h-2.425zM14.46 14.191H9.982c0-.471.033-.954.039-1.458v-5.5h5.106V5.935a1.352 1.352 0 0 0-.404-.957 1.378 1.378 0 0 0-.968-.396H5.783c.028-.088.056-.177.084-.255.274-.82 1.153-3.326 1.153-3.326a4.262 4.262 0 0 0-2.413.698c-.57.4-.912.682-1.371 1.946-.532 1.453-.997 2.856-1.31 3.693C1.444 8.674.28 11.025.28 11.025a5.85 5.85 0 0 0 2.52-.61c1.119-.593 1.679-1.502 2.054-2.883l.09-.3h2.334v5.5c0 .5-.045.982-.073 1.46h-4.12c-.71 0-1.39.278-1.893.775a2.638 2.638 0 0 0-.783 1.874h6.527a17.717 17.717 0 0 1-.778 3.649 16.796 16.796 0 0 1-3.012 5.273A33.104 33.104 0 0 1 0 28.74s3.13 1.175 5.425-.954c1.388-1.292 2.631-3.814 3.23-5.727a28.09 28.09 0 0 0 1.12-5.229h5.967v-1.37a1.254 1.254 0 0 0-.373-.899 1.279 1.279 0 0 0-.909-.37z"></path><path d="M11.27 19.675l-2.312 1.491 5.038 7.458a6.905 6.905 0 0 0 .672-2.218 3.15 3.15 0 0 0-.28-2.168l-3.118-4.563zM51.449 15.195V5.842c4.181-.205 7.988-.405 9.438-.483l.851-.05c.387-.399.885-2.395.689-3.021-.073-.25-.213-.666-.638-.555a33.279 33.279 0 0 1-4.277.727c-2.766.321-3.97.404-7.804.682-6.718.487-12.709.72-12.709.72a2.518 2.518 0 0 0 .788 1.834 2.567 2.567 0 0 0 1.883.706c2.278-.095 5.598-.25 8.996-.41v9.203h-12.78c0 .703.281 1.377.783 1.874a2.69 2.69 0 0 0 1.892.777h10.105v7.075c0 .887-.464 1.192-1.231 1.214h-3.92a4.15 4.15 0 0 0 .837 1.544 4.2 4.2 0 0 0 1.403 1.067 6.215 6.215 0 0 0 2.71.277c1.36-.066 2.967-.826 2.967-3.57v-7.607h11.28c.342 0 .67-.135.91-.374.242-.239.378-.563.378-.902v-1.375H51.449z"></path><path d="M42.614 8.873a2.304 2.304 0 0 0-1.508-.926 2.334 2.334 0 0 0-1.727.405l-.376.272 4.255 5.85 2.24-1.62-2.884-3.98zM57.35 8.68l-3.125 4.097 2.24 1.663 4.517-5.927-.375-.277a2.32 2.32 0 0 0-1.722-.452 2.327 2.327 0 0 0-1.536.896z"></path></svg></a><style data-emotion-css="g0ay3v">.css-g0ay3v{margin-left:25px;margin-right:15px;}.css-g0ay3v .AppHeader-Tab{padding-left:15px;padding-right:15px;}.css-g0ay3v .Tabs-link.is-active::after{height:4px;}</style><ul role="navigation" class="Tabs AppHeader-Tabs css-g0ay3v"><li role="tab" class="Tabs-item AppHeader-Tab Tabs-item--noMeta"><a class="Tabs-link AppHeader-TabsLink" href="//www.zhihu.com/" data-za-not-track-link="true">首页</a></li><li role="tab" class="Tabs-item AppHeader-Tab Tabs-item--noMeta"><a class="Tabs-link AppHeader-TabsLink" href="//www.zhihu.com/xen/vip-web" data-za-not-track-link="true">会员</a></li><li role="tab" class="Tabs-item AppHeader-Tab Tabs-item--noMeta"><a class="Tabs-link AppHeader-TabsLink" href="//www.zhihu.com/explore" data-za-not-track-link="true">发现</a></li><li role="tab" class="Tabs-item AppHeader-Tab Tabs-item--noMeta"><a class="Tabs-link AppHeader-TabsLink" href="//www.zhihu.com/question/waiting" data-za-not-track-link="true">等你来答</a></li></ul><style data-emotion-css="1acwmmj">.css-1acwmmj{box-sizing:border-box;margin:0;min-width:0;-webkit-flex:1;-ms-flex:1;flex:1;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><div class="css-1acwmmj"><style data-emotion-css="10fy1q8">.css-10fy1q8{max-width:482px;}.css-10fy1q8 .SearchBar-input{border-radius:999px;padding-left:16px;}.css-10fy1q8 .SearchBar-askButton{border-radius:999px;width:70px;margin-left:12px;}.css-10fy1q8 .SearchBar-searchButton{border-bottom-right-radius:999px;border-top-right-radius:999px;}</style><div class="SearchBar AppHeader-SearchBar css-10fy1q8" role="search" data-za-module="PresetWordItem"><form class="SearchBar-tool"><div><div class="Popover"><label class="SearchBar-input Input-wrapper Input-wrapper--grey"><input type="text" maxLength="100" value="" autoComplete="off" role="combobox" aria-expanded="false" aria-autocomplete="list" aria-activedescendant="null--1" id="null-toggle" aria-haspopup="true" aria-owns="null-content" class="Input" placeholder=""/><button aria-label="搜索" type="button" class="Button SearchBar-searchButton Button--primary"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Search SearchBar-searchIcon" fill="currentColor" viewBox="0 0 24 24" width="18" height="18"><path d="M17.068 15.58a8.377 8.377 0 0 0 1.774-5.159 8.421 8.421 0 1 0-8.42 8.421 8.38 8.38 0 0 0 5.158-1.774l3.879 3.88c.957.573 2.131-.464 1.488-1.49l-3.879-3.878zm-6.647 1.157a6.323 6.323 0 0 1-6.316-6.316 6.323 6.323 0 0 1 6.316-6.316 6.323 6.323 0 0 1 6.316 6.316 6.323 6.323 0 0 1-6.316 6.316z" fill-rule="evenodd"></path></svg></span></button></label></div></div></form></div></div><div class="AppHeader-userInfo"><div class="AppHeader-profile"><div><button type="button" class="Button AppHeader-login Button--blue">登录</button><button type="button" class="Button Button--primary Button--blue">加入知乎</button></div></div></div></div><div></div></header></div><main role="main" class="App-main"><div class="QuestionPage" itemscope="" itemType="http://schema.org/Question"><meta itemProp="name" content="编译器具体实现中比较巧妙的思想有哪些？"/><meta itemProp="url" content="https://www.zhihu.com/question/27943883"/><meta itemProp="keywords" content="算法,系统架构,数据结构,编译原理,编译器"/><meta itemProp="answerCount" content="6"/><meta itemProp="commentCount" content="0"/><meta itemProp="dateCreated" content="2015-02-02T14:53:13.000Z"/><meta itemProp="dateModified" content="2015-02-02T18:02:39.000Z"/><meta itemProp="zhihu:visitsCount"/><meta itemProp="zhihu:followerCount" content="687"/><div data-zop-question="{&quot;title&quot;:&quot;编译器具体实现中比较巧妙的思想有哪些？&quot;,&quot;topics&quot;:[{&quot;name&quot;:&quot;算法&quot;,&quot;id&quot;:&quot;19553510&quot;},{&quot;name&quot;:&quot;系统架构&quot;,&quot;id&quot;:&quot;19578413&quot;},{&quot;name&quot;:&quot;数据结构&quot;,&quot;id&quot;:&quot;19591797&quot;},{&quot;name&quot;:&quot;编译原理&quot;,&quot;id&quot;:&quot;19601369&quot;},{&quot;name&quot;:&quot;编译器&quot;,&quot;id&quot;:&quot;19608032&quot;}],&quot;id&quot;:27943883,&quot;isEditable&quot;:false}"><div><div class="QuestionHeader"><div class="QuestionHeader-content"><div class="QuestionHeader-main"><div class="QuestionHeader-tags"><div class="QuestionHeader-topics"><div class="Tag QuestionTopic"><span class="Tag-content"><a class="TopicLink" href="//www.zhihu.com/topic/19553510" target="_blank"><div class="Popover"><div id="null-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="null-content">算法</div></div></a></span></div><div class="Tag QuestionTopic"><span class="Tag-content"><a class="TopicLink" href="//www.zhihu.com/topic/19578413" target="_blank"><div class="Popover"><div id="null-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="null-content">系统架构</div></div></a></span></div><div class="Tag QuestionTopic"><span class="Tag-content"><a class="TopicLink" href="//www.zhihu.com/topic/19591797" target="_blank"><div class="Popover"><div id="null-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="null-content">数据结构</div></div></a></span></div><div class="Tag QuestionTopic"><span class="Tag-content"><a class="TopicLink" href="//www.zhihu.com/topic/19601369" target="_blank"><div class="Popover"><div id="null-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="null-content">编译原理</div></div></a></span></div><div class="Tag QuestionTopic"><span class="Tag-content"><a class="TopicLink" href="//www.zhihu.com/topic/19608032" target="_blank"><div class="Popover"><div id="null-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="null-content">编译器</div></div></a></span></div></div></div><h1 class="QuestionHeader-title">编译器具体实现中比较巧妙的思想有哪些？</h1><div><style data-emotion-css="eew49z">.css-eew49z{min-height:10px;}</style><div class="css-eew49z"><div class="QuestionRichText QuestionRichText--expandable QuestionRichText--collapsed"><div><span>如题，注意是具体实现，而不是编译原理中的好思想！ 最好是一些比较精专的思想，而不是Hash、KMP等通用的思想，比如邵成 所答。 P.S. 回答时，最…</span><button type="button" class="Button QuestionRichText-more Button--plain">显示全部 <span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--ArrowDown" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M12 13L8.285 9.218a.758.758 0 0 0-1.064 0 .738.738 0 0 0 0 1.052l4.249 4.512a.758.758 0 0 0 1.064 0l4.246-4.512a.738.738 0 0 0 0-1.052.757.757 0 0 0-1.063 0L12.002 13z" fill-rule="evenodd"></path></svg></span></button></div></div></div></div></div><div class="QuestionHeader-side"><div class="QuestionHeader-follow-status"><div class="QuestionFollowStatus"><div class="NumberBoard QuestionFollowStatus-counts NumberBoard--divider"><div class="NumberBoard-item"><div class="NumberBoard-itemInner"><div class="NumberBoard-itemName">关注者</div><strong class="NumberBoard-itemValue" title="687">687</strong></div></div><div class="NumberBoard-item"><div class="NumberBoard-itemInner"><div class="NumberBoard-itemName">被浏览</div><strong class="NumberBoard-itemValue" title="15924">15,924</strong></div></div></div></div></div></div></div><div class="QuestionHeader-footer"><div class="QuestionHeader-footer-inner"><div class="QuestionHeader-main QuestionHeader-footer-main"><div class="QuestionButtonGroup"><button type="button" class="Button FollowButton Button--primary Button--blue">关注问题</button><button type="button" class="Button Button--blue"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Edit QuestionButton-icon" fill="currentColor" viewBox="0 0 24 24" width="16" height="16"><path d="M4.076 16.966a4.19 4.19 0 0 1 1.05-1.76l8.568-8.569a.524.524 0 0 1 .741 0l2.928 2.927a.524.524 0 0 1 0 .74l-8.568 8.57c-.49.49-1.096.852-1.761 1.051l-3.528 1.058a.394.394 0 0 1-.49-.488l1.06-3.53zM20.558 4.83c.59.59.59 1.546 0 2.136l-1.693 1.692a.503.503 0 0 1-.712 0l-2.812-2.812a.504.504 0 0 1 0-.712l1.693-1.693a1.51 1.51 0 0 1 2.135 0l1.389 1.389z"></path></svg></span>写回答</button></div><div class="QuestionHeaderActions"><button style="margin-right:16px" type="button" class="Button Button--grey Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Invite Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M4 10V8a1 1 0 1 1 2 0v2h2a1 1 0 0 1 0 2H6v2a1 1 0 0 1-2 0v-2H2a1 1 0 0 1 0-2h2zm10.455 2c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm-7 6c0-2.66 4.845-4 7.272-4C17.155 14 22 15.34 22 18v1.375c0 .345-.28.625-.625.625H8.08a.625.625 0 0 1-.625-.625V18z" fill-rule="evenodd"></path></svg></span>邀请回答</button><div class="GoodQuestionAction"><button type="button" class="Button GoodQuestionAction-commonBtn Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Like Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M14.445 9h5.387s2.997.154 1.95 3.669c-.168.51-2.346 6.911-2.346 6.911s-.763 1.416-2.86 1.416H8.989c-1.498 0-2.005-.896-1.989-2v-7.998c0-.987.336-2.032 1.114-2.639 4.45-3.773 3.436-4.597 4.45-5.83.985-1.13 3.2-.5 3.037 2.362C15.201 7.397 14.445 9 14.445 9zM3 9h2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1z" fill-rule="evenodd"></path></svg></span>好问题 3</button></div><div class="QuestionHeader-Comment"><button type="button" class="Button Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Comment Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M10.241 19.313a.97.97 0 0 0-.77.2 7.908 7.908 0 0 1-3.772 1.482.409.409 0 0 1-.38-.637 5.825 5.825 0 0 0 1.11-2.237.605.605 0 0 0-.227-.59A7.935 7.935 0 0 1 3 11.25C3 6.7 7.03 3 12 3s9 3.7 9 8.25-4.373 9.108-10.759 8.063z" fill-rule="evenodd"></path></svg></span>添加评论</button></div><div class="Popover ShareMenu"><div class="ShareMenu-toggler" id="null-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="null-content"><button type="button" class="Button Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Share Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2.931 7.89c-1.067.24-1.275 1.669-.318 2.207l5.277 2.908 8.168-4.776c.25-.127.477.198.273.39L9.05 14.66l.927 5.953c.18 1.084 1.593 1.376 2.182.456l9.644-15.242c.584-.892-.212-2.029-1.234-1.796L2.93 7.89z" fill-rule="evenodd"></path></svg></span>分享</button></div></div><div class="Popover"><button aria-label="更多" id="null-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="null-content" type="button" class="Button Button--plain Button--withIcon Button--iconOnly"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Dots Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5 14a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z" fill-rule="evenodd"></path></svg></span></button></div></div><div class="QuestionHeader-actions"></div></div></div></div></div></div><div><div class="Sticky"></div></div></div><div class="Question-main"><div class="Question-mainColumn"><div><div id="QuestionAnswers-answers" class="QuestionAnswers-answers" data-zop-feedlistmap="0,0,1,0"><div class="Card AnswersNavWrapper"><div class="ListShortcut"><div class="List"><div class="List-header"><h4 class="List-headerText"><span>6<!-- --> 个回答</span></h4><div class="List-headerOptions"><div class="Popover"><button role="combobox" aria-expanded="false" id="null-toggle" aria-haspopup="true" aria-owns="null-content" type="button" class="Button InputLike InputButton Select-button Select-plainButton Button--plain">默认排序<svg class="Zi Zi--Select Select-arrow" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M12 16.183l2.716-2.966a.757.757 0 0 1 1.064.001.738.738 0 0 1 0 1.052l-3.247 3.512a.758.758 0 0 1-1.064 0L8.22 14.27a.738.738 0 0 1 0-1.052.758.758 0 0 1 1.063 0L12 16.183zm0-9.365L9.284 9.782a.758.758 0 0 1-1.064 0 .738.738 0 0 1 0-1.052l3.248-3.512a.758.758 0 0 1 1.065 0L15.78 8.73a.738.738 0 0 1 0 1.052.757.757 0 0 1-1.063.001L12 6.818z" fill-rule="evenodd"></path></svg></button></div></div></div><div><div class=""><div class="List-item" tabindex="0"><div class="ContentItem AnswerItem" data-za-index="0" data-zop="{&quot;authorName&quot;:&quot;RednaxelaFX&quot;,&quot;itemId&quot;:39035471,&quot;title&quot;:&quot;编译器具体实现中比较巧妙的思想有哪些？&quot;,&quot;type&quot;:&quot;answer&quot;}" name="39035471" itemProp="acceptedAnswer" itemType="http://schema.org/Answer" itemscope=""><div class="ContentItem-meta"><div class="AuthorInfo AnswerItem-authorInfo AnswerItem-authorInfo--related" itemProp="author" itemscope="" itemType="http://schema.org/Person"><meta itemProp="name" content="RednaxelaFX"/><meta itemProp="image" content="https://pic2.zhimg.com/ee07454da2fc6d007c29ca9b393f94ac_l.jpg?source=1940ef5c"/><meta itemProp="url" content="https://www.zhihu.com/people/rednaxelafx"/><meta itemProp="zhihu:followerCount" content="163508"/><span class="UserLink AuthorInfo-avatarWrapper"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/rednaxelafx"><img class="Avatar AuthorInfo-avatar" width="38" height="38" src="https://pic2.zhimg.com/ee07454da2fc6d007c29ca9b393f94ac_xs.jpg?source=1940ef5c" srcSet="https://pic2.zhimg.com/ee07454da2fc6d007c29ca9b393f94ac_l.jpg?source=1940ef5c 2x" alt="RednaxelaFX"/></a></span><div class="AuthorInfo-content"><div class="AuthorInfo-head"><span class="UserLink AuthorInfo-name"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/rednaxelafx">RednaxelaFX</a><style data-emotion-css="1cd9gw4">.css-1cd9gw4{margin-left:.3em;}</style><style data-emotion-css="n99yhz">.css-n99yhz{box-sizing:border-box;margin:0;min-width:0;color:#175199;display:inline-block;margin-left:.3em;}</style><a href="https://www.zhihu.com/topic/20054793" target="_blank" class="css-n99yhz" aria-label="计算机科学等 7 个话题下的优秀答主" data-tooltip="计算机科学等 7 个话题下的优秀答主"><style data-emotion-css="g9eqf4-StrutAlign">.css-g9eqf4-StrutAlign{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><span class="css-g9eqf4-StrutAlign">​<style data-emotion-css="svsrxm-Octangle">.css-svsrxm-Octangle{overflow:visible!important;}</style><svg viewBox="0 0 24 24" class="css-svsrxm-Octangle" width="18" height="18"><svg viewBox="0 0 24 24" x="-3" y="-3" fill="#FFFFFF" width="30" height="30"><path d="M3.56231227,13.8535307 C2.40051305,12.768677 2.41398885,11.0669203 3.59484487,9.99979213 L3.59222085,9.99654885 C4.26730143,9.45036719 4.79446755,8.21005186 4.7184197,7.34453784 L4.72305873,7.34412719 C4.66942824,5.75539997 5.8824188,4.56066914 7.47188965,4.64242381 L7.47229112,4.6386236 C8.33515314,4.72977993 9.58467253,4.22534048 10.1426329,3.55925173 L10.1462611,3.56228565 C11.2316055,2.40008701 12.9353108,2.41394456 14.0015072,3.59634088 L14.0047263,3.59374004 C14.5498229,4.26841874 15.7896857,4.79521622 16.6545744,4.71844347 L16.6549836,4.72304294 C18.245027,4.66894057 19.4396947,5.88213996 19.3575031,7.47241135 L19.3623099,7.47292747 C19.2704388,8.3358681 19.7742711,9.58421483 20.4407199,10.1424506 L20.437686,10.1460789 C21.5997217,11.2312209 21.5860695,12.9345218 20.4042441,14.0007396 L20.4072865,14.0045125 C19.7325967,14.5495925 19.2055209,15.7896954 19.2815865,16.6561959 L19.2770449,16.6565978 C19.3315454,18.2453037 18.1173775,19.4393568 16.5274188,19.3571512 L16.5269029,19.3619539 C15.6647098,19.270083 14.415408,19.7741709 13.8573671,20.4403558 L13.8537409,20.4373235 C12.76842,21.5995708 11.0650432,21.5864553 9.99899434,20.4039226 L9.99527367,20.406923 C9.45025436,19.7323399 8.21017638,19.2051872 7.34461983,19.2812352 L7.344304,19.2776405 C5.75448683,19.3312904 4.55977145,18.1170085 4.64254978,16.527117 L4.63769921,16.5265942 C4.72957031,15.6644394 4.22547659,14.4151814 3.55928015,13.8571569 L3.56231227,13.8535307 Z"></path></svg><path d="M2.63951518,13.3895441 C3.70763333,14.2842292 4.44777637,16.1226061 4.30075305,17.5023312 L4.32211542,17.3063047 C4.17509209,18.6910561 5.17786655,19.7063729 6.5613937,19.5844846 L6.364106,19.6008202 C7.75140298,19.4789319 9.57474349,20.2554985 10.4468305,21.3349009 L10.3224262,21.1803415 C11.1982831,22.2647703 12.6257916,22.2723098 13.5167278,21.2079863 L13.3898102,21.3600325 C14.2845162,20.2919393 16.1229361,19.5518136 17.5026934,19.6988334 L17.3054057,19.6774716 C18.6914461,19.8244915 19.7067866,18.8217404 19.5836389,17.4395022 L19.6012314,17.6367853 C19.4793403,16.2482641 20.255925,14.4249662 21.3353526,13.5528995 L21.1807897,13.677301 C22.2639871,12.8014646 22.2727834,11.3739894 21.2084351,10.483074 L21.3604848,10.6099886 C20.2923667,9.71530351 19.5522236,7.87818322 19.6992469,6.49720154 L19.6778846,6.69448464 C19.8249079,5.30847665 18.8221335,4.2944164 17.4386063,4.41630468 L17.635894,4.39871256 C16.248597,4.52185742 14.4252565,3.74529084 13.5531695,2.66588842 L13.6775738,2.81919121 C12.8017169,1.73601905 11.3742084,1.72722299 10.4832722,2.79154644 L10.6101898,2.63950024 C9.71548377,3.70759343 7.87706394,4.44771919 6.49730661,4.30195588 L6.69459432,4.32206116 C5.30855394,4.17504128 4.29447,5.17904888 4.41636114,6.56128713 L4.3987686,6.36400404 C4.52065973,7.75126861 3.74407501,9.57456653 2.66464737,10.4478898 L2.81921035,10.3222318 C1.73601288,11.1993248 1.72721662,12.6255433 2.79156494,13.5164587 L2.63951518,13.3895441 Z" fill="#FF9607"></path><svg class="Zi Zi--Star" fill="#fff" x="6" y="6" viewBox="0 0 24 24" width="12" height="12"><path d="M5.515 19.64l.918-5.355-3.89-3.792c-.926-.902-.639-1.784.64-1.97L8.56 7.74l2.404-4.871c.572-1.16 1.5-1.16 2.072 0L15.44 7.74l5.377.782c1.28.186 1.566 1.068.64 1.97l-3.89 3.793.918 5.354c.219 1.274-.532 1.82-1.676 1.218L12 18.33l-4.808 2.528c-1.145.602-1.896.056-1.677-1.218z" fill-rule="evenodd"></path></svg></svg></span></a></span></div><div class="AuthorInfo-detail"><div class="AuthorInfo-badge"><div class="ztext AuthorInfo-badgeText">计算机科学等 7 个话题下的优秀答主</div></div></div></div></div><style data-emotion-css="h5al4j">.css-h5al4j{box-sizing:border-box;margin:0;min-width:0;color:#8590A6;font-size:14px;margin-top:10px;margin-bottom:-4px;}</style><div class="css-h5al4j"><span><span class="Voters"><button type="button" class="Button Button--plain">216 人<!-- -->赞同了该回答</button></span></span></div></div><meta itemProp="image"/><meta itemProp="upvoteCount" content="216"/><meta itemProp="url" content="https://www.zhihu.com/question/27943883/answer/39035471"/><meta itemProp="dateCreated" content="2015-02-06T01:11:38.000Z"/><meta itemProp="dateModified" content="2015-02-06T06:50:47.000Z"/><meta itemProp="commentCount" content="19"/><div class="RichContent RichContent--unescapable"><div class="RichContent-inner"><span class="RichText ztext CopyrightRichText-richText" itemProp="text">草稿不发容易坑…这个还是先发了占坑再慢慢更新好了。有啥建议分析的东西欢迎在回复里提～<br/><br/>要说编译器实现的巧妙思想，很多都是用来解决工程性问题的，跟编译原理中的算法（解决抽象概念问题 / 学术问题）未必有直接关系。<br/>题主是更想知道某个算法在具体实现中的特点或者说应用方式呢，还是更想了解工程方面的问题呢？<br/>我觉得前者应该有很多人会给出非常有趣的回答，我就主要回答后者的方面吧。解决工程性问题的巧妙技巧也挺吸引人的，而且有非常大量的素材…根本无法列举完。<br/><br/><b>LLVM</b><br/><br/>说到编译器实现，不得不落个俗套说说<a href="https://link.zhihu.com/?target=http%3A//llvm.org/" class=" wrap external" target="_blank" rel="nofollow noreferrer">LLVM</a>编译器套件。不用介绍LLVM是啥了，感觉是“地球人都知道”系列。<br/><br/>1、一套IR，三种表现形式：运行时表现形式（<a href="https://link.zhihu.com/?target=http%3A//llvm.org/docs/ProgrammersManual.html%23the-core-llvm-class-hierarchy-reference" class=" wrap external" target="_blank" rel="nofollow noreferrer">llvm/IR</a>，内存中）、序列化表现形式（<a href="https://link.zhihu.com/?target=http%3A//llvm.org/docs/BitCodeFormat.html" class=" wrap external" target="_blank" rel="nofollow noreferrer">bitcode</a>，用于存储）、文本表现形式（<a href="https://link.zhihu.com/?target=http%3A//llvm.org/docs/LangRef.html" class=" wrap external" target="_blank" rel="nofollow noreferrer">“LLVM汇编”</a>，便于人阅读和编辑）。三种形式间可以无损变换是LLVM非常非常强大的实现特点之一。<br/><br/>实际使用时能否真的达到无损变换很大程度上取决于要实现的语言有多少东西无法用LLVM IR表达。<br/>例如说如果有语言实现基于LLVM来实现JIT编译器，并且想把一个运行时的对象指针当作常量嵌入生成的代码里，它可以把这个常量构造成LLVM IR，但如果把这个常量序列化到bitcode或生成文本形式，等“下一次编译”再读出来用的话，那个常量指针可能已经不对了。这跟生成PIC（position-independent code）的问题类似，但LLVM没办法帮语言解决这种问题。<br/>也有可能有些语言实现偷懒，有些嵌入LLVM IR的metadata无法无损转换为文本形式，这也不能怪LLVM IR不好，但确实是使用中要头疼的问题…<br/><br/>这种一套IR三种表现形式的设计非常实用，一些新的语言实现项目受其影响也采用了类似的设计。<br/><br/>例如<a href="https://link.zhihu.com/?target=http%3A//www.anu.edu.au/" class=" wrap external" target="_blank" rel="nofollow noreferrer">Australian National University</a>主导的<a href="https://link.zhihu.com/?target=http%3A//microvm.github.io/" class=" wrap external" target="_blank" rel="nofollow noreferrer">MicroVM</a>（μVM）项目，其<a href="https://link.zhihu.com/?target=https%3A//github.com/microvm/microvm-spec/wiki/uvm-ir" class=" wrap external" target="_blank" rel="nofollow noreferrer">μVM IR</a>跟LLVM IR非常相似，也自然采纳了“三种表现形式”的做法。μVM的规范里只定义了两种标准格式：文本格式与序列化格式；至于运行时形式可以由各个μVM实现自行定义，只要能兼容两种标准格式即可。<br/><br/>2、对IR的变换，组织为相对独立的<a href="https://link.zhihu.com/?target=http%3A//llvm.org/docs/WritingAnLLVMPass.html" class=" wrap external" target="_blank" rel="nofollow noreferrer">Pass</a>，并用<a href="https://link.zhihu.com/?target=http%3A//llvm.org/docs/doxygen/html/classllvm_1_1PassManager.html" class=" wrap external" target="_blank" rel="nofollow noreferrer">PassManager</a>来管理起来。<br/>相对独立的Pass设计<br/>用<a href="https://link.zhihu.com/?target=http%3A//llvm.org/docs/CommandGuide/opt.html" class=" wrap external" target="_blank" rel="nofollow noreferrer">opt</a>命令单独执行一个Pass。<br/><br/>未完待续…<br/><br/>3、<a href="https://link.zhihu.com/?target=http%3A//llvm.org/docs/Bugpoint.html" class=" wrap external" target="_blank" rel="nofollow noreferrer">bugpoint</a><br/><br/>抓虫小能手…<br/><br/>未完待续…<br/><br/><b>HotSpot Server Compiler (HotSpot C2)</b><br/><br/>HotSpot VM是Oracle/Sun JDK以及OpenJDK里的JVM实现。C2是HotSpot Server VM里的JIT编译器，是一个“较为优化”的实现。<br/>C2的简单入门介绍可以参考我以前写的个回答：<a href="https://link.zhihu.com/?target=http%3A//hllvm.group.iteye.com/group/topic/39493%23post-258162" class=" wrap external" target="_blank" rel="nofollow noreferrer">回复：[HotSpot VM] 想研究HotSpot C2编译器编译过程，请教如何入手？</a><br/><br/>关键词：Sea-of-nodes形式的Program Dependence Graph（PDG）。<br/><br/>未完待续…<br/><br/>采用类似的sea-of-nodes PDG作为IR的编译器还有：<br/><a class=" wrap external" href="https://link.zhihu.com/?target=http%3A//pp.ipd.kit.edu/firm/" target="_blank" rel="nofollow noreferrer">libFirm</a>。它有个online playground，想了解它的话很容易上手玩，可以看到代码对应的IR图的样子：<a href="https://link.zhihu.com/?target=http%3A//kreacher.isla-de-muerta.de/~matze/online_compiler/" class=" wrap external" target="_blank" rel="nofollow noreferrer">Firm Online Compiler</a><br/><a href="https://link.zhihu.com/?target=http%3A//openjdk.java.net/projects/graal/" class=" wrap external" target="_blank" rel="nofollow noreferrer">Graal</a> 。Graal IR论文 <a href="https://link.zhihu.com/?target=http%3A//ssw.jku.at/General/Staff/GD/APPLC-2013-paper_12.pdf" class=" wrap external" target="_blank" rel="nofollow noreferrer">Graal IR: An Extensible Declarative Intermediate Representation</a><br/><a href="https://link.zhihu.com/?target=http%3A//www.cacaojvm.org/" class=" wrap external" target="_blank" rel="nofollow noreferrer">CACAO VM</a>的<a href="https://link.zhihu.com/?target=http%3A//c1.complang.tuwien.ac.at%3A8010/compiler2/doxygen/Compiler_8hpp.html" class=" wrap external" target="_blank" rel="nofollow noreferrer">Second-stage Compiler</a><br/><a href="https://link.zhihu.com/?target=https%3A//code.google.com/p/v8/" class=" wrap external" target="_blank" rel="nofollow noreferrer">V8 JavaScript Engine</a>的<a href="https://link.zhihu.com/?target=https%3A//chromium.googlesource.com/v8/v8.git/%2B/master/src/compiler/" class=" wrap external" target="_blank" rel="nofollow noreferrer">TurboFan</a>。TurboFan是V8新的优化编译器，目前还在早期开发阶段。如果把V8当前的optimizing compiler跟HotSpot C1类比，那么TurboFan就跟HotSpot C2在一个级别。<br/><a href="https://link.zhihu.com/?target=http%3A//source.android.com/devices/tech/dalvik/" class=" wrap external" target="_blank" rel="nofollow noreferrer">ART</a>的<a href="https://link.zhihu.com/?target=https%3A//android.googlesource.com/platform/art/%2B/407d77f344cfbdbbfb50531c5f0766bc0892e2fe/compiler/sea_ir/" class=" wrap external" target="_blank" rel="nofollow noreferrer">Sea IR</a>（在platform/art的master上已删除）。Sea IR是ART里基于LLVM的编译器后端的其中一个；主要的基于LLVM的后端是另外一个，叫做Portable，也已经被废弃了；在这俩之前其实还有一个，被Portable替代了。<br/>ActionScript 3/AVM2的优化器（未发布项目）。Adobe做过一个实验性的AS3优化器，<br/><br/><b>JamVM</b><br/><br/><a href="https://link.zhihu.com/?target=http%3A//jamvm.sourceforge.net/" class=" wrap external" target="_blank" rel="nofollow noreferrer">JamVM</a>是一个小巧的JVM实现，麻雀虽小五脏具全。它既可以在桌面、服务器场景中用搭配<a href="https://link.zhihu.com/?target=http%3A//www.gnu.org/software/classpath/" class=" wrap external" target="_blank" rel="nofollow noreferrer">GNU Classpath</a>或<a href="https://link.zhihu.com/?target=http%3A//openjdk.java.net/" class=" wrap external" target="_blank" rel="nofollow noreferrer">OpenJDK</a>的类库用于Java SE的实现，也可以在嵌入式场景中用于Java ME的实现。<br/>JamVM以C语言实现，在某些配置下使用了GCC的语法扩展（例如<a href="https://link.zhihu.com/?target=https%3A//gcc.gnu.org/onlinedocs/gcc/Labels-as-Values.html" class=" wrap external" target="_blank" rel="nofollow noreferrer">computed goto</a>）。<br/><br/>关键词：Inline-threaded Interpreter<br/><br/>题主问的不是编译器的实现么，为啥这里会冒出解释器？<br/>因为“inline-threaded interpreter”还有另一个名字，“code-copying JIT”，或者叫“template-based JIT”；每种叫法的侧重点、出发点不同，但所指的东西其实是一样的。<br/><br/>一个字节码解释器可以组织为每个opcode有一个对应的执行程序（handler）。既然opcode到handler的对应关系是固定的，而我们又可以知道一个要执行的方法里的所有字节码，那么把每条字节码指令对应的handler代码拷贝出来粘合在一起，不就做成一个编译器了么？<br/><br/>这种做法的好处是：<br/><ul><li>可以作为解释器性能升级的一个简单路径，写解释器的代码而得到初级编译器的性能。事实上JamVM的解释器可以配置为多种实现方式：switch-threading、indirect-threading、direct-threading、inline-threading，它们的差别仅在于对opcode的dispatch方式不同；所有实现方式都共享同一份handler代码。</li></ul><br/>这种做法的缺点是：<br/><ul><li>这样写得到的“编译器”无论从代码组织还是程序思路都还是解释器的那套，从编译器的角度看很别扭。它最终实现出来效果跟从编译器角度出发的template-based JIT一样，但我觉得后者的思路更直观，代码也通常更清晰一些。</li><li>这种做法仍然无法跨越字节码边界做任何优化，因为每个opcode对应一个单独的handler，而这种做法的代码生成仅仅是把handler拷贝到一起而已。</li><li>要在它的基础之上进一步提高性能可以直接对字节码序列做些简单模式匹配，以便跨越字节码边界做优化。但这样做通常是自讨苦吃，工程上很难持续下去。</li></ul><br/>贴一小块代码给大家感受一下“一套解释器，多种实现”是什么样子的。熟悉C语言的同学肯定猜到了，这意味着一大堆奇怪的宏…<br/><br/>src/interp/engine/interp.c<br/><div class="highlight"><pre><code class="language-c"><span class="n">uintptr_t</span> <span class="o">*</span><span class="nf">executeJava</span><span class="p">()</span> <span class="p">{</span>

    <span class="cm">/* Definitions specific to the particular
</span><span class="cm">       interpreter variant */</span>
    <span class="n">INTERPRETER_DEFINITIONS</span>

   <span class="cm">/* Caching is supported in all variants and
</span><span class="cm">      may be enabled or disabled */</span>
<span class="cp">#ifdef USE_CACHE
</span><span class="cp"></span>    <span class="k">union</span> <span class="p">{</span>
        <span class="k">struct</span> <span class="p">{</span>
            <span class="n">uintptr_t</span> <span class="n">v1</span><span class="p">;</span>
            <span class="n">uintptr_t</span> <span class="n">v2</span><span class="p">;</span>
        <span class="p">}</span> <span class="n">i</span><span class="p">;</span>
        <span class="n">int64_t</span> <span class="n">l</span><span class="p">;</span>
    <span class="p">}</span> <span class="n">cache</span><span class="p">;</span>
<span class="cp">#endif
</span><span class="cp"></span>
    <span class="cm">/* Variable definitions holding the interpreter
</span><span class="cm">       state.  These are common to all interpreter
</span><span class="cm">       variants */</span>
    <span class="n">uintptr_t</span> <span class="o">*</span><span class="n">arg1</span><span class="p">;</span>
    <span class="k">register</span> <span class="n">CodePntr</span> <span class="n">pc</span><span class="p">;</span>
    <span class="n">ExecEnv</span> <span class="o">*</span><span class="n">ee</span> <span class="o">=</span> <span class="n">getExecEnv</span><span class="p">();</span>
    <span class="n">Frame</span> <span class="o">*</span><span class="n">frame</span> <span class="o">=</span> <span class="n">ee</span><span class="o">-&gt;</span><span class="n">last_frame</span><span class="p">;</span>
    <span class="k">register</span> <span class="n">uintptr_t</span> <span class="o">*</span><span class="n">lvars</span> <span class="o">=</span> <span class="n">frame</span><span class="o">-&gt;</span><span class="n">lvars</span><span class="p">;</span>
    <span class="k">register</span> <span class="n">uintptr_t</span> <span class="o">*</span><span class="n">ostack</span> <span class="o">=</span> <span class="n">frame</span><span class="o">-&gt;</span><span class="n">ostack</span><span class="p">;</span>

    <span class="n">Object</span> <span class="o">*</span><span class="n">this</span> <span class="o">=</span> <span class="p">(</span><span class="n">Object</span><span class="o">*</span><span class="p">)</span><span class="n">lvars</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="n">MethodBlock</span> <span class="o">*</span><span class="n">new_mb</span><span class="p">,</span> <span class="o">*</span><span class="n">mb</span> <span class="o">=</span> <span class="n">frame</span><span class="o">-&gt;</span><span class="n">mb</span><span class="p">;</span>
    <span class="n">ConstantPool</span> <span class="o">*</span><span class="n">cp</span> <span class="o">=</span> <span class="o">&amp;</span><span class="p">(</span><span class="n">CLASS_CB</span><span class="p">(</span><span class="n">mb</span><span class="o">-&gt;</span><span class="n">class</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">constant_pool</span><span class="p">);</span>

    <span class="cm">/* Initialise pc to the start of the method.  If it
</span><span class="cm">       hasn&#39;t been executed before it may need preparing */</span>
    <span class="n">PREPARE_MB</span><span class="p">(</span><span class="n">mb</span><span class="p">);</span>
    <span class="n">pc</span> <span class="o">=</span> <span class="p">(</span><span class="n">CodePntr</span><span class="p">)</span><span class="n">mb</span><span class="o">-&gt;</span><span class="n">code</span><span class="p">;</span>

    <span class="cm">/* The initial dispatch code - this is specific to
</span><span class="cm">       the interpreter variant */</span>
    <span class="n">INTERPRETER_PROLOGUE</span>

    <span class="cm">/* Definitions of the opcode handlers */</span>

<span class="cp">#define MULTI_LEVEL_OPCODES(level)                         \
</span><span class="cp">    DEF_OPC(OPC_ICONST_M1, level,                          \
</span><span class="cp">        PUSH_##level(-1, 1);                               \
</span><span class="cp">    )                                                      \
</span><span class="cp">
</span><span class="cp"></span>    <span class="cm">/* ... */</span></code></pre></div>这是解释器核心的共享部分。<br/>然后来看switch-threading版的一些宏定义：<br/>src/interp/engine/interp-indirect.h<br/><div class="highlight"><pre><code class="language-c"><span class="cp">#define INTERPRETER_DEFINITIONS                            \
</span><span class="cp">    </span><span class="cm">/* none */</span><span class="cp">
</span><span class="cp"></span>
<span class="cp">#define DISPATCH_PROLOGUE                                  \
</span><span class="cp">    while(TRUE) {                                          \
</span><span class="cp">        switch(*pc) {                                      \
</span><span class="cp">            default:
</span><span class="cp"></span>
<span class="cp">#define label(x, y, z)                          \
</span><span class="cp">    case x:
</span><span class="cp"></span>
<span class="cp">#define DISPATCH(level, ins_len)                \
</span><span class="cp">{                                               \
</span><span class="cp">    pc += ins_len;                              \
</span><span class="cp">    break;                                      \
</span><span class="cp">}
</span></code></pre></div>这样编译出来的解释器就是大家耳熟能详的 while (TRUE) { switch { ... } }形式。<br/>然后看看indirect-threading版：<br/>src/interp/engine/interp-indirect.h<br/><div class="highlight"><pre><code class="language-c"><span class="cp">#define INTERPRETER_DEFINITIONS                            \
</span><span class="cp">    DEFINE_HANDLER_TABLES
</span><span class="cp"></span>
<span class="cp">#define DISPATCH_PROLOGUE                                  \
</span><span class="cp">    DISPATCH_FIRST                                         \
</span><span class="cp">unused:
</span><span class="cp"></span>
<span class="cp">#if (__GNUC__ == 2) &amp;&amp; (__GNUC_MINOR__ &lt;= 95)
</span><span class="cp">#define label(x, y, z)                          \
</span><span class="cp">opc##x##_##y##_##z##:
</span><span class="cp">#else
</span><span class="cp">#define label(x, y, z)                          \
</span><span class="cp">opc##x##_##y##_##z:
</span><span class="cp">#endif
</span><span class="cp"></span>
<span class="cp">#define DISPATCH(level, ins_len)                \
</span><span class="cp">{                                               \
</span><span class="cp">    pc += ins_len;                              \
</span><span class="cp">    goto *handlers_##level##_ENTRY[*pc];        \
</span><span class="cp">}
</span></code></pre></div>这样编译出来的解释器就是使用了GCC的computed goto语法扩展的indirect-threading（或者叫token-threading）。<br/>然后是这一节的关键字，inline-threading…代码贴出来太麻烦，大家自己去看吧：<br/>src/interp/engine/interp-inlining.h<br/><br/>类似的做法在更早的解释器就已经有所应用。例子之一是<a href="https://link.zhihu.com/?target=http%3A//www.sablevm.org/" class=" wrap external" target="_blank" rel="nofollow noreferrer">SableVM</a>。<br/>描述SableVM做法的论文：<br/><a href="https://link.zhihu.com/?target=http%3A//citeseerx.ist.psu.edu/viewdoc/summary%3Fdoi%3D10.1.1.90.8603" class=" wrap external" target="_blank" rel="nofollow noreferrer">Effective inline-threaded interpretation of Java bytecode using preparation sequences</a><br/><br/><b>SquirrelFish Extreme (SFX)</b><br/><br/>SFX是Apple JavaScriptCore的一个比较老（2008年）的实现，参考 <a href="https://link.zhihu.com/?target=https%3A//www.webkit.org/blog/214/introducing-squirrelfish-extreme/" class=" wrap external" target="_blank" rel="nofollow noreferrer">Introducing SquirrelFish Extreme</a>；宣传中的代号是Nitro。后来新的JavaScriptCore有了更正常、传统一些的编译器，但这里我想写的是链接中描述的老的“Context-threaded JIT”。<br/><br/><a href="https://link.zhihu.com/?target=http%3A//www.cs.toronto.edu/syslab/pubs/demkea_context.ps" class=" wrap external" target="_blank" rel="nofollow noreferrer">Context Threading: A flexible and efficient dispatch technique for virtual machine interpreters</a><br/><br/>这是比inline-threading略弱的、介于解释器与编译器之间的一种实现方式。<br/><br/>未完待续…<br/><br/><b>Managed JScript</b><br/><br/><a href="https://link.zhihu.com/?target=http%3A//blogs.msdn.com/b/deepak/archive/2007/05/02/managed-jscript-is-availaible.aspx" class=" wrap external" target="_blank" rel="nofollow noreferrer">Managed JScript</a>是微软基于<a href="https://link.zhihu.com/?target=http%3A//dlr.codeplex.com/" class=" wrap external" target="_blank" rel="nofollow noreferrer">Dynamic Language Runtime</a>（DLR）实现的JavaScript引擎。当初目标是完全兼容ECMAScript 3标准。做到一半项目被坎，所以Managed JScript从来没有正式发布过。最后发布的版本是在Silverlight Dynamic Language SDK 0.4.0带的那个。<br/>关于它的背景，请参考链接帖：<a href="https://link.zhihu.com/?target=http%3A//hllvm.group.iteye.com/group/topic/37596%3Fpage%3D2%23post-243750" class=" wrap external" target="_blank" rel="nofollow noreferrer">[链接帖] 各JavaScript引擎的简介，及相关资料/博客收集帖讨论第2页</a><br/><br/>要拿这种已死的老项目出来举栗子是因为它的parser挺特别：使用纯运算符优先级（operator precedence）形式的自顶向下parser。<br/><a href="https://link.zhihu.com/?target=http%3A//javascript.crockford.com/tdop/tdop.html" class=" wrap external" target="_blank" rel="nofollow noreferrer">Top Down Operator Precedence</a><br/><br/>未完待续…<br/><br/>TODO<br/><br/>Dynamic Superinstruction<br/>compiler benchmark cheating LINPACK DONGARRA FORTRAN</span></div><div><div class="ContentItem-time"><a target="_blank" href="//www.zhihu.com/question/27943883/answer/39035471"><span data-tooltip="发布于 2015-02-06 09:11">编辑于 2015-02-06</span></a></div></div><div class="ContentItem-actions RichContent-actions"><span><button aria-label="赞同 216 " type="button" class="Button VoteButton VoteButton--up"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--TriangleUp VoteButton-TriangleUp" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M2 18.242c0-.326.088-.532.237-.896l7.98-13.203C10.572 3.57 11.086 3 12 3c.915 0 1.429.571 1.784 1.143l7.98 13.203c.15.364.236.57.236.896 0 1.386-.875 1.9-1.955 1.9H3.955c-1.08 0-1.955-.517-1.955-1.9z" fill-rule="evenodd"></path></svg></span>赞同 216</button><button aria-label="反对" type="button" class="Button VoteButton VoteButton--down"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--TriangleDown" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M20.044 3H3.956C2.876 3 2 3.517 2 4.9c0 .326.087.533.236.896L10.216 19c.355.571.87 1.143 1.784 1.143s1.429-.572 1.784-1.143l7.98-13.204c.149-.363.236-.57.236-.896 0-1.386-.876-1.9-1.956-1.9z" fill-rule="evenodd"></path></svg></span></button></span><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Comment Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M10.241 19.313a.97.97 0 0 0-.77.2 7.908 7.908 0 0 1-3.772 1.482.409.409 0 0 1-.38-.637 5.825 5.825 0 0 0 1.11-2.237.605.605 0 0 0-.227-.59A7.935 7.935 0 0 1 3 11.25C3 6.7 7.03 3 12 3s9 3.7 9 8.25-4.373 9.108-10.759 8.063z" fill-rule="evenodd"></path></svg></span>19 条评论</button><div class="Popover ShareMenu ContentItem-action"><div class="ShareMenu-toggler" id="null-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="null-content"><button type="button" class="Button Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Share Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2.931 7.89c-1.067.24-1.275 1.669-.318 2.207l5.277 2.908 8.168-4.776c.25-.127.477.198.273.39L9.05 14.66l.927 5.953c.18 1.084 1.593 1.376 2.182.456l9.644-15.242c.584-.892-.212-2.029-1.234-1.796L2.93 7.89z" fill-rule="evenodd"></path></svg></span>分享</button></div></div><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Star Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5.515 19.64l.918-5.355-3.89-3.792c-.926-.902-.639-1.784.64-1.97L8.56 7.74l2.404-4.871c.572-1.16 1.5-1.16 2.072 0L15.44 7.74l5.377.782c1.28.186 1.566 1.068.64 1.97l-3.89 3.793.918 5.354c.219 1.274-.532 1.82-1.676 1.218L12 18.33l-4.808 2.528c-1.145.602-1.896.056-1.677-1.218z" fill-rule="evenodd"></path></svg></span>收藏</button><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Heart Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2 8.437C2 5.505 4.294 3.094 7.207 3 9.243 3 11.092 4.19 12 6c.823-1.758 2.649-3 4.651-3C19.545 3 22 5.507 22 8.432 22 16.24 13.842 21 12 21 10.158 21 2 16.24 2 8.437z" fill-rule="evenodd"></path></svg></span>喜欢</button><button data-zop-retract-question="true" type="button" class="Button ContentItem-action ContentItem-rightButton Button--plain"><span class="RichContent-collapsedText">收起</span><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--ArrowDown ContentItem-arrowIcon is-active" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M12 13L8.285 9.218a.758.758 0 0 0-1.064 0 .738.738 0 0 0 0 1.052l4.249 4.512a.758.758 0 0 0 1.064 0l4.246-4.512a.738.738 0 0 0 0-1.052.757.757 0 0 0-1.063 0L12.002 13z" fill-rule="evenodd"></path></svg></span></button></div></div><div class="ModalWrap"><div><div class=""></div><div class="ModalExp-content"><div class="ModalWrap-content"><div class="ModalWrap-title">继续浏览内容</div><div class="ModalWrap-item"><div class="ModalWrap-itemImg"><img src="https://pic4.zhimg.com/80/v2-88158afcff1e7f4b8b00a1ba81171b61_720w.png"/></div><div class="ModalWrap-itemContent"><div class="ModalWrap-itemTitle">知乎</div><div class="ModalWrap-itemDesc">发现更大的世界</div></div><div class="ModalWrap-itemBtn">打开</div></div><div class="ModalWrap-item"><div class="ModalWrap-itemImg"><img src="https://pic2.zhimg.com/80/v2-da7d9e4b6a7ddba507299bcf5a4d0600_1440w.png"/></div><div class="ModalWrap-itemContent"><div class="ModalWrap-itemTitle">浏览器</div></div><div class="ModalWrap-itemBtn">继续</div></div></div></div></div></div><div><div><div class=""></div><div class="ModalLoading-content"><svg width="30" height="30" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg" class="CircleLoadingBar" aria-hidden="true"><g><circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></g></svg></div></div></div></div></div><div class="List-item" tabindex="0"><div class="ContentItem AnswerItem" data-za-index="1" data-zop="{&quot;authorName&quot;:&quot;猫爹&quot;,&quot;itemId&quot;:38764362,&quot;title&quot;:&quot;编译器具体实现中比较巧妙的思想有哪些？&quot;,&quot;type&quot;:&quot;answer&quot;}" name="38764362" itemProp="suggestedAnswer" itemType="http://schema.org/Answer" itemscope=""><div class="ContentItem-meta"><div class="AuthorInfo AnswerItem-authorInfo AnswerItem-authorInfo--related" itemProp="author" itemscope="" itemType="http://schema.org/Person"><meta itemProp="name" content="猫爹"/><meta itemProp="image" content="https://pic1.zhimg.com/ba81a20fc9e3e9274111780e28cda66d_l.jpg?source=1940ef5c"/><meta itemProp="url" content="https://www.zhihu.com/people/miushock"/><meta itemProp="zhihu:followerCount" content="756"/><span class="UserLink AuthorInfo-avatarWrapper"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/miushock"><img class="Avatar AuthorInfo-avatar" width="38" height="38" src="https://pic1.zhimg.com/ba81a20fc9e3e9274111780e28cda66d_xs.jpg?source=1940ef5c" srcSet="https://pic1.zhimg.com/ba81a20fc9e3e9274111780e28cda66d_l.jpg?source=1940ef5c 2x" alt="猫爹"/></a></span><div class="AuthorInfo-content"><div class="AuthorInfo-head"><span class="UserLink AuthorInfo-name"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/miushock">猫爹</a><style data-emotion-css="1cd9gw4">.css-1cd9gw4{margin-left:.3em;}</style></span></div><div class="AuthorInfo-detail"><div class="AuthorInfo-badge"><div class="ztext AuthorInfo-badgeText">我家有两只小猫</div></div></div></div></div><style data-emotion-css="h5al4j">.css-h5al4j{box-sizing:border-box;margin:0;min-width:0;color:#8590A6;font-size:14px;margin-top:10px;margin-bottom:-4px;}</style><div class="css-h5al4j"><span><span class="Voters"><button type="button" class="Button Button--plain">4 人<!-- -->赞同了该回答</button></span></span></div></div><meta itemProp="image"/><meta itemProp="upvoteCount" content="4"/><meta itemProp="url" content="https://www.zhihu.com/question/27943883/answer/38764362"/><meta itemProp="dateCreated" content="2015-02-03T02:25:12.000Z"/><meta itemProp="dateModified" content="2015-02-03T02:25:12.000Z"/><meta itemProp="commentCount" content="2"/><div class="RichContent RichContent--unescapable"><div class="RichContent-inner"><span class="RichText ztext CopyrightRichText-richText" itemProp="text">我觉得龙书的巧妙思想从头到尾一直都有啊<br/><br/>比如最前面的从LL(1)然后到LR/LALR这些，龙书上没有提到的还有antlr的LL(*)，其后的symbol table的使用等等。从codegen开始东西就更多了，比如使用动态规划生成最少的指令。优化的时候使用的data flow analysis等等。<br/><br/>说的有些泛，不能达到题主要求，不过题主问得也非常泛啊，让人难以把握你提问的目的。毕竟如果是对没有编译原理基础的人来说，想直接看编译器代码是比较好高骛远的事情，单是把data flow analysis搞明白，理解lattice，收敛等东西已经算是很有深度的事情了。能把下推自动机整明白，清楚cfg的边界的已经算程序员里面理论功底扎实的人才了。</span></div><div><div class="ContentItem-time"><a target="_blank" href="//www.zhihu.com/question/27943883/answer/38764362"><span data-tooltip="发布于 2015-02-03 10:25">发布于 2015-02-03</span></a></div></div><div class="ContentItem-actions RichContent-actions"><span><button aria-label="赞同 4 " type="button" class="Button VoteButton VoteButton--up"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--TriangleUp VoteButton-TriangleUp" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M2 18.242c0-.326.088-.532.237-.896l7.98-13.203C10.572 3.57 11.086 3 12 3c.915 0 1.429.571 1.784 1.143l7.98 13.203c.15.364.236.57.236.896 0 1.386-.875 1.9-1.955 1.9H3.955c-1.08 0-1.955-.517-1.955-1.9z" fill-rule="evenodd"></path></svg></span>赞同 4</button><button aria-label="反对" type="button" class="Button VoteButton VoteButton--down"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--TriangleDown" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M20.044 3H3.956C2.876 3 2 3.517 2 4.9c0 .326.087.533.236.896L10.216 19c.355.571.87 1.143 1.784 1.143s1.429-.572 1.784-1.143l7.98-13.204c.149-.363.236-.57.236-.896 0-1.386-.876-1.9-1.956-1.9z" fill-rule="evenodd"></path></svg></span></button></span><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Comment Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M10.241 19.313a.97.97 0 0 0-.77.2 7.908 7.908 0 0 1-3.772 1.482.409.409 0 0 1-.38-.637 5.825 5.825 0 0 0 1.11-2.237.605.605 0 0 0-.227-.59A7.935 7.935 0 0 1 3 11.25C3 6.7 7.03 3 12 3s9 3.7 9 8.25-4.373 9.108-10.759 8.063z" fill-rule="evenodd"></path></svg></span>2 条评论</button><div class="Popover ShareMenu ContentItem-action"><div class="ShareMenu-toggler" id="null-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="null-content"><button type="button" class="Button Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Share Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2.931 7.89c-1.067.24-1.275 1.669-.318 2.207l5.277 2.908 8.168-4.776c.25-.127.477.198.273.39L9.05 14.66l.927 5.953c.18 1.084 1.593 1.376 2.182.456l9.644-15.242c.584-.892-.212-2.029-1.234-1.796L2.93 7.89z" fill-rule="evenodd"></path></svg></span>分享</button></div></div><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Star Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5.515 19.64l.918-5.355-3.89-3.792c-.926-.902-.639-1.784.64-1.97L8.56 7.74l2.404-4.871c.572-1.16 1.5-1.16 2.072 0L15.44 7.74l5.377.782c1.28.186 1.566 1.068.64 1.97l-3.89 3.793.918 5.354c.219 1.274-.532 1.82-1.676 1.218L12 18.33l-4.808 2.528c-1.145.602-1.896.056-1.677-1.218z" fill-rule="evenodd"></path></svg></span>收藏</button><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Heart Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2 8.437C2 5.505 4.294 3.094 7.207 3 9.243 3 11.092 4.19 12 6c.823-1.758 2.649-3 4.651-3C19.545 3 22 5.507 22 8.432 22 16.24 13.842 21 12 21 10.158 21 2 16.24 2 8.437z" fill-rule="evenodd"></path></svg></span>喜欢</button><button data-zop-retract-question="true" type="button" class="Button ContentItem-action ContentItem-rightButton Button--plain"><span class="RichContent-collapsedText">收起</span><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--ArrowDown ContentItem-arrowIcon is-active" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M12 13L8.285 9.218a.758.758 0 0 0-1.064 0 .738.738 0 0 0 0 1.052l4.249 4.512a.758.758 0 0 0 1.064 0l4.246-4.512a.738.738 0 0 0 0-1.052.757.757 0 0 0-1.063 0L12.002 13z" fill-rule="evenodd"></path></svg></span></button></div></div><div class="ModalWrap"><div><div class=""></div><div class="ModalExp-content"><div class="ModalWrap-content"><div class="ModalWrap-title">继续浏览内容</div><div class="ModalWrap-item"><div class="ModalWrap-itemImg"><img src="https://pic4.zhimg.com/80/v2-88158afcff1e7f4b8b00a1ba81171b61_720w.png"/></div><div class="ModalWrap-itemContent"><div class="ModalWrap-itemTitle">知乎</div><div class="ModalWrap-itemDesc">发现更大的世界</div></div><div class="ModalWrap-itemBtn">打开</div></div><div class="ModalWrap-item"><div class="ModalWrap-itemImg"><img src="https://pic2.zhimg.com/80/v2-da7d9e4b6a7ddba507299bcf5a4d0600_1440w.png"/></div><div class="ModalWrap-itemContent"><div class="ModalWrap-itemTitle">浏览器</div></div><div class="ModalWrap-itemBtn">继续</div></div></div></div></div></div><div><div><div class=""></div><div class="ModalLoading-content"><svg width="30" height="30" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg" class="CircleLoadingBar" aria-hidden="true"><g><circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></g></svg></div></div></div></div></div><div></div></div></div></div></div></div></div></div></div></div></div></main><div data-zop-usertoken="{}"></div></div></div><script id="js-clientConfig" type="text/json">{"host":"zhihu.com","protocol":"https:","wwwHost":"www.zhihu.com","fetchRoot":{"www":"https:\u002F\u002Fwww.zhihu.com","api":"https:\u002F\u002Fapi.zhihu.com","lens":"https:\u002F\u002Flens.zhihu.com","zhuanlan":"https:\u002F\u002Fzhuanlan.zhihu.com","walletpay":"https:\u002F\u002Fwalletpay.zhihu.com","captcha":"https:\u002F\u002Fcaptcha.zhihu.com"}}</script><script id="js-initialData" type="text/json">{"initialState":{"common":{"ask":{}},"loading":{"global":{"count":0},"local":{"question\u002Fget\u002F":false,"question\u002FgetAnswers\u002F27943883":false}},"club":{"tags":{},"admins":{"data":[]},"members":{"data":[]},"explore":{"candidateSyncClubs":{}},"profile":{},"checkin":{},"comments":{"paging":{},"loading":{},"meta":{},"ids":{}},"postList":{"paging":{},"loading":{},"ids":{}},"recommend":{"data":[]},"silences":{"data":[]},"application":{"profile":null}},"entities":{"users":{},"questions":{"27943883":{"type":"question","id":27943883,"title":"编译器具体实现中比较巧妙的思想有哪些？","questionType":"normal","created":1422888793,"updatedTime":1422900159,"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fquestions\u002F27943883","isMuted":false,"isVisible":true,"isNormal":true,"isEditable":false,"adminClosedComment":false,"hasPublishingDraft":false,"answerCount":6,"visitCount":15924,"commentCount":0,"followerCount":687,"collapsedAnswerCount":0,"excerpt":"如题，注意是具体实现，而不是编译原理中的好思想！ 最好是一些比较精专的思想，而不是Hash、KMP等通用的思想，比如邵成 所答。 P.S. 回答时，最好能指明编译器及其版本，以及该思想好的原因。","commentPermission":"all","detail":"如题，注意是\u003Cb\u003E具体实现\u003C\u002Fb\u003E，而不是编译原理中的好思想！\u003Cbr\u002F\u003E最好是一些比较\u003Cb\u003E精专\u003C\u002Fb\u003E的思想，而不是Hash、KMP等通用的思想，比如\u003Ca href=\"http:\u002F\u002Fwww.zhihu.com\u002Fpeople\u002Fshaocheng_cafe2code\" class=\"internal\"\u003E邵成\u003C\u002Fa\u003E所答。\u003Cbr\u002F\u003EP.S. 回答时，最好能指明\u003Cb\u003E编译器\u003C\u002Fb\u003E\u003Cb\u003E及其版本，以及该思想好的原因\u003C\u002Fb\u003E。","editableDetail":"如题，注意是\u003Cb\u003E具体实现\u003C\u002Fb\u003E，而不是编译原理中的好思想！\u003Cbr\u003E最好是一些比较\u003Cb\u003E精专\u003C\u002Fb\u003E的思想，而不是Hash、KMP等通用的思想，比如\u003Ca href=\"http:\u002F\u002Fwww.zhihu.com\u002Fpeople\u002Fshaocheng_cafe2code\" class=\"\"\u003E邵成\u003C\u002Fa\u003E所答。\u003Cbr\u003EP.S. 回答时，最好能指明\u003Cb\u003E编译器\u003C\u002Fb\u003E\u003Cb\u003E及其版本，以及该思想好的原因\u003C\u002Fb\u003E。","status":{"isLocked":false,"isClose":false,"isEvaluate":false,"isSuggest":false},"relationship":{"isAuthor":false,"isFollowing":false,"isAnonymous":false,"canLock":false,"canStickAnswers":false,"canCollapseAnswers":false,"voting":0},"topics":[{"id":"19553510","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19553510","name":"算法","avatarUrl":"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-aedb03e53d6cd64945a7daca17a32cac_720w.jpg?source=54b3c3a5","topicType":"CHANNEL"},{"id":"19578413","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19578413","name":"系统架构","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002F266bb1c94_l.jpg?source=1940ef5c","topicType":"NORMAL"},{"id":"19591797","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19591797","name":"数据结构","avatarUrl":"https:\u002F\u002Fpic4.zhimg.com\u002F50\u002Fv2-33c2c81205e2396971e3dc1d678dd324_720w.jpg?source=54b3c3a5","topicType":"NORMAL"},{"id":"19601369","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19601369","name":"编译原理","avatarUrl":"https:\u002F\u002Fpic3.zhimg.com\u002Fd806c5eee_l.jpg?source=1940ef5c","topicType":"NORMAL"},{"id":"19608032","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19608032","name":"编译器","avatarUrl":"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-cb4b6dc0c53f63697afabbabf0c9b699_720w.jpg?source=54b3c3a5","topicType":"NORMAL"}],"author":{"id":"3e119e879860d076ed0e585a03bf8aac","urlToken":"wang17-4","name":"菊大郎","avatarUrl":"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-2934305915f5b8ccc2f2a93db64fbf71_l.jpg?source=1940ef5c","avatarUrlTemplate":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-2934305915f5b8ccc2f2a93db64fbf71.jpg?source=1940ef5c","isOrg":false,"type":"people","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fpeople\u002F3e119e879860d076ed0e585a03bf8aac","userType":"people","headline":"To be a better man","badge":[],"badgeV2":{"title":"","mergedBadges":[],"detailBadges":[],"icon":"","nightIcon":""},"gender":1,"isAdvertiser":false,"isPrivacy":false},"canComment":{"status":true,"reason":""},"thumbnailInfo":{"count":0,"type":"thumbnail_info","thumbnails":[]},"reviewInfo":{"type":"","tips":"","editTips":"","isReviewing":false,"editIsReviewing":false},"relatedCards":[],"muteInfo":{"type":""},"showAuthor":false,"isLabeled":false,"showEncourageAuthor":false,"voteupCount":3,"canVote":true,"visibleOnlyToAuthor":false}},"answers":{"38764362":{"id":38764362,"type":"answer","answerType":"normal","question":{"type":"question","id":27943883,"title":"编译器具体实现中比较巧妙的思想有哪些？","questionType":"normal","created":1422888793,"updatedTime":1422900159,"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fquestions\u002F27943883","relationship":{}},"author":{"id":"69108d4e04aaa27726161a4438a2ab2d","urlToken":"miushock","name":"猫爹","avatarUrl":"https:\u002F\u002Fpic1.zhimg.com\u002Fba81a20fc9e3e9274111780e28cda66d_l.jpg?source=1940ef5c","avatarUrlTemplate":"https:\u002F\u002Fpic1.zhimg.com\u002Fba81a20fc9e3e9274111780e28cda66d.jpg?source=1940ef5c","isOrg":false,"type":"people","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fpeople\u002F69108d4e04aaa27726161a4438a2ab2d","userType":"people","headline":"我家有两只小猫","badge":[],"badgeV2":{"title":"","mergedBadges":[],"detailBadges":[],"icon":"","nightIcon":""},"gender":1,"isAdvertiser":false,"followerCount":756,"isFollowed":false,"isPrivacy":false},"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fanswers\u002F38764362","isCollapsed":false,"createdTime":1422930312,"updatedTime":1422930312,"extras":"","isCopyable":true,"isNormal":true,"voteupCount":4,"commentCount":2,"isSticky":false,"adminClosedComment":false,"commentPermission":"all","canComment":{"reason":"","status":true},"reshipmentSettings":"allowed","content":"我觉得龙书的巧妙思想从头到尾一直都有啊\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E比如最前面的从LL(1)然后到LR\u002FLALR这些，龙书上没有提到的还有antlr的LL(*)，其后的symbol table的使用等等。从codegen开始东西就更多了，比如使用动态规划生成最少的指令。优化的时候使用的data flow analysis等等。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E说的有些泛，不能达到题主要求，不过题主问得也非常泛啊，让人难以把握你提问的目的。毕竟如果是对没有编译原理基础的人来说，想直接看编译器代码是比较好高骛远的事情，单是把data flow analysis搞明白，理解lattice，收敛等东西已经算是很有深度的事情了。能把下推自动机整明白，清楚cfg的边界的已经算程序员里面理论功底扎实的人才了。","editableContent":"","excerpt":"我觉得龙书的巧妙思想从头到尾一直都有啊 比如最前面的从LL(1)然后到LR\u002FLALR这些，龙书上没有提到的还有antlr的LL(*)，其后的symbol table的使用等等。从codegen开始东西就更多了，比如使用动态规划生成最少的指令。优化的时候使用的data flow analysis等等。 说的有些泛，不能达到题主要求，不过题主问得也非常泛啊，让人难以把握你提问的目的。毕竟如果是对没有编译原理基础的人来说，想直接看编译器代码是比较好高骛远的事情…","collapsedBy":"nobody","collapseReason":"","annotationAction":null,"markInfos":[],"relevantInfo":{"isRelevant":false,"relevantType":"","relevantText":""},"suggestEdit":{"reason":"","status":false,"tip":"","title":"","unnormalDetails":{"status":"","description":"","reason":"","reasonId":0,"note":""},"url":""},"isLabeled":false,"rewardInfo":{"canOpenReward":false,"isRewardable":false,"rewardMemberCount":0,"rewardTotalMoney":0,"tagline":""},"relationship":{"isAuthor":false,"isAuthorized":false,"isNothelp":false,"isThanked":false,"isRecognized":false,"voting":0,"upvotedFollowees":[]},"adAnswer":null},"39035471":{"id":39035471,"type":"answer","answerType":"normal","question":{"type":"question","id":27943883,"title":"编译器具体实现中比较巧妙的思想有哪些？","questionType":"normal","created":1422888793,"updatedTime":1422900159,"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fquestions\u002F27943883","relationship":{}},"author":{"id":"a06cfb38e37dac1658e6457df4d7f032","urlToken":"rednaxelafx","name":"RednaxelaFX","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002Fee07454da2fc6d007c29ca9b393f94ac_l.jpg?source=1940ef5c","avatarUrlTemplate":"https:\u002F\u002Fpic2.zhimg.com\u002Fee07454da2fc6d007c29ca9b393f94ac.jpg?source=1940ef5c","isOrg":false,"type":"people","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fpeople\u002Fa06cfb38e37dac1658e6457df4d7f032","userType":"people","headline":"软件工程师、主攻高级编程语言虚拟机的设计与实现","badge":[{"type":"best_answerer","description":"优秀答主","topics":[{"id":"19601369","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19601369","name":"编译原理","avatarUrl":"https:\u002F\u002Fpic4.zhimg.com\u002Fd806c5eee_l.jpg?source=1940ef5c","topicType":"NORMAL"},{"id":"19552521","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19552521","name":"JavaScript","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002F50\u002Fv2-0f398092b3562f4e857a0ef3875e186e_720w.jpg?source=54b3c3a5","topicType":"CHANNEL"},{"id":"19554298","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19554298","name":"编程","avatarUrl":"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-27b8ba1e647956fa6f1a2a8ad90138ef_720w.jpg?source=54b3c3a5","topicType":"CHANNEL"},{"id":"19552826","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19552826","name":"编程语言","avatarUrl":"https:\u002F\u002Fpic3.zhimg.com\u002F50\u002Fv2-14ae19e0df2e9517722a4832fc682743_720w.jpg?source=54b3c3a5","topicType":"NORMAL"},{"id":"19552832","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19552832","name":"Python","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002F50\u002Fv2-1a9bf5312114564fb132692b355b5199_720w.jpg?source=54b3c3a5","topicType":"CHANNEL"},{"id":"19580349","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19580349","name":"计算机科学","avatarUrl":"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-2425584cf56e7caae35080a03010a30a_l.jpg?source=1940ef5c","topicType":"CHANNEL"},{"id":"19584970","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19584970","name":"C++","avatarUrl":"https:\u002F\u002Fpic1.zhimg.com\u002F50\u002Fv2-e5f8ab95c0e99a29704fae7e629f9f77_720w.jpg?source=54b3c3a5","topicType":"CHANNEL"}]}],"badgeV2":{"title":"计算机科学等 7 个话题下的优秀答主","mergedBadges":[{"type":"best","detailType":"best","title":"优秀答主","description":"计算机科学等 7 个话题下的优秀答主","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F20054793","sources":[{"id":"19580349","token":"19580349","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19580349","name":"计算机科学","avatarPath":"v2-2425584cf56e7caae35080a03010a30a.png","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-2425584cf56e7caae35080a03010a30a_hd.jpg","description":"","priority":0},{"id":"19584970","token":"19584970","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19584970","name":"C++","avatarPath":"v2-e5f8ab95c0e99a29704fae7e629f9f77","avatarUrl":"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-e5f8ab95c0e99a29704fae7e629f9f77_hd.jpg","description":"","priority":0},{"id":"19554298","token":"19554298","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19554298","name":"编程","avatarPath":"v2-27b8ba1e647956fa6f1a2a8ad90138ef","avatarUrl":"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-27b8ba1e647956fa6f1a2a8ad90138ef_hd.jpg","description":"","priority":0},{"id":"19601369","token":"19601369","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19601369","name":"编译原理","avatarPath":"d806c5eee","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002Fd806c5eee_hd.jpg","description":"","priority":0},{"id":"19552521","token":"19552521","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19552521","name":"JavaScript","avatarPath":"v2-0f398092b3562f4e857a0ef3875e186e","avatarUrl":"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-0f398092b3562f4e857a0ef3875e186e_hd.jpg","description":"","priority":0},{"id":"19552826","token":"19552826","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19552826","name":"编程语言","avatarPath":"v2-14ae19e0df2e9517722a4832fc682743","avatarUrl":"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-14ae19e0df2e9517722a4832fc682743_hd.jpg","description":"","priority":0},{"id":"19552832","token":"19552832","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19552832","name":"Python","avatarPath":"v2-1a9bf5312114564fb132692b355b5199","avatarUrl":"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-1a9bf5312114564fb132692b355b5199_hd.jpg","description":"","priority":0}],"icon":"","nightIcon":""}],"detailBadges":[{"type":"best","detailType":"best_answerer","title":"优秀答主","description":"计算机科学等 7 个话题下的优秀答主","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F20054793","sources":[{"id":"19580349","token":"19580349","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19580349","name":"计算机科学","avatarPath":"v2-2425584cf56e7caae35080a03010a30a.png","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-2425584cf56e7caae35080a03010a30a_hd.jpg","description":"","priority":0},{"id":"19584970","token":"19584970","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19584970","name":"C++","avatarPath":"v2-e5f8ab95c0e99a29704fae7e629f9f77","avatarUrl":"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-e5f8ab95c0e99a29704fae7e629f9f77_hd.jpg","description":"","priority":0},{"id":"19554298","token":"19554298","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19554298","name":"编程","avatarPath":"v2-27b8ba1e647956fa6f1a2a8ad90138ef","avatarUrl":"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-27b8ba1e647956fa6f1a2a8ad90138ef_hd.jpg","description":"","priority":0},{"id":"19601369","token":"19601369","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19601369","name":"编译原理","avatarPath":"d806c5eee","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002Fd806c5eee_hd.jpg","description":"","priority":0},{"id":"19552521","token":"19552521","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19552521","name":"JavaScript","avatarPath":"v2-0f398092b3562f4e857a0ef3875e186e","avatarUrl":"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-0f398092b3562f4e857a0ef3875e186e_hd.jpg","description":"","priority":0},{"id":"19552826","token":"19552826","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19552826","name":"编程语言","avatarPath":"v2-14ae19e0df2e9517722a4832fc682743","avatarUrl":"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-14ae19e0df2e9517722a4832fc682743_hd.jpg","description":"","priority":0},{"id":"19552832","token":"19552832","type":"topic","url":"https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19552832","name":"Python","avatarPath":"v2-1a9bf5312114564fb132692b355b5199","avatarUrl":"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-1a9bf5312114564fb132692b355b5199_hd.jpg","description":"","priority":0}],"icon":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-bf0eec3c31c8e866c468f60eb296696c_l.png","nightIcon":"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-c724649168d8f9d36d7c3d13140a2594_l.png"}],"icon":"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-bf0eec3c31c8e866c468f60eb296696c_l.png","nightIcon":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-c724649168d8f9d36d7c3d13140a2594_l.png"},"gender":1,"isAdvertiser":false,"followerCount":163508,"isFollowed":false,"isPrivacy":false},"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fanswers\u002F39035471","isCollapsed":false,"createdTime":1423185098,"updatedTime":1423205447,"extras":"","isCopyable":true,"isNormal":true,"voteupCount":216,"commentCount":19,"isSticky":false,"adminClosedComment":false,"commentPermission":"all","canComment":{"reason":"","status":true},"reshipmentSettings":"allowed","content":"草稿不发容易坑…这个还是先发了占坑再慢慢更新好了。有啥建议分析的东西欢迎在回复里提～\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E要说编译器实现的巧妙思想，很多都是用来解决工程性问题的，跟编译原理中的算法（解决抽象概念问题 \u002F 学术问题）未必有直接关系。\u003Cbr\u002F\u003E题主是更想知道某个算法在具体实现中的特点或者说应用方式呢，还是更想了解工程方面的问题呢？\u003Cbr\u002F\u003E我觉得前者应该有很多人会给出非常有趣的回答，我就主要回答后者的方面吧。解决工程性问题的巧妙技巧也挺吸引人的，而且有非常大量的素材…根本无法列举完。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E\u003Cb\u003ELLVM\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E说到编译器实现，不得不落个俗套说说\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fllvm.org\u002F\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003ELLVM\u003C\u002Fa\u003E编译器套件。不用介绍LLVM是啥了，感觉是“地球人都知道”系列。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E1、一套IR，三种表现形式：运行时表现形式（\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fllvm.org\u002Fdocs\u002FProgrammersManual.html%23the-core-llvm-class-hierarchy-reference\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003Ellvm\u002FIR\u003C\u002Fa\u003E，内存中）、序列化表现形式（\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fllvm.org\u002Fdocs\u002FBitCodeFormat.html\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003Ebitcode\u003C\u002Fa\u003E，用于存储）、文本表现形式（\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fllvm.org\u002Fdocs\u002FLangRef.html\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E“LLVM汇编”\u003C\u002Fa\u003E，便于人阅读和编辑）。三种形式间可以无损变换是LLVM非常非常强大的实现特点之一。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E实际使用时能否真的达到无损变换很大程度上取决于要实现的语言有多少东西无法用LLVM IR表达。\u003Cbr\u002F\u003E例如说如果有语言实现基于LLVM来实现JIT编译器，并且想把一个运行时的对象指针当作常量嵌入生成的代码里，它可以把这个常量构造成LLVM IR，但如果把这个常量序列化到bitcode或生成文本形式，等“下一次编译”再读出来用的话，那个常量指针可能已经不对了。这跟生成PIC（position-independent code）的问题类似，但LLVM没办法帮语言解决这种问题。\u003Cbr\u002F\u003E也有可能有些语言实现偷懒，有些嵌入LLVM IR的metadata无法无损转换为文本形式，这也不能怪LLVM IR不好，但确实是使用中要头疼的问题…\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E这种一套IR三种表现形式的设计非常实用，一些新的语言实现项目受其影响也采用了类似的设计。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E例如\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fwww.anu.edu.au\u002F\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003EAustralian National University\u003C\u002Fa\u003E主导的\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fmicrovm.github.io\u002F\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003EMicroVM\u003C\u002Fa\u003E（μVM）项目，其\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fgithub.com\u002Fmicrovm\u002Fmicrovm-spec\u002Fwiki\u002Fuvm-ir\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003EμVM IR\u003C\u002Fa\u003E跟LLVM IR非常相似，也自然采纳了“三种表现形式”的做法。μVM的规范里只定义了两种标准格式：文本格式与序列化格式；至于运行时形式可以由各个μVM实现自行定义，只要能兼容两种标准格式即可。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E2、对IR的变换，组织为相对独立的\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fllvm.org\u002Fdocs\u002FWritingAnLLVMPass.html\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003EPass\u003C\u002Fa\u003E，并用\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fllvm.org\u002Fdocs\u002Fdoxygen\u002Fhtml\u002Fclassllvm_1_1PassManager.html\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003EPassManager\u003C\u002Fa\u003E来管理起来。\u003Cbr\u002F\u003E相对独立的Pass设计\u003Cbr\u002F\u003E用\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fllvm.org\u002Fdocs\u002FCommandGuide\u002Fopt.html\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003Eopt\u003C\u002Fa\u003E命令单独执行一个Pass。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E未完待续…\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E3、\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fllvm.org\u002Fdocs\u002FBugpoint.html\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003Ebugpoint\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E抓虫小能手…\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E未完待续…\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E\u003Cb\u003EHotSpot Server Compiler (HotSpot C2)\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\u003Cbr\u002F\u003EHotSpot VM是Oracle\u002FSun JDK以及OpenJDK里的JVM实现。C2是HotSpot Server VM里的JIT编译器，是一个“较为优化”的实现。\u003Cbr\u002F\u003EC2的简单入门介绍可以参考我以前写的个回答：\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fhllvm.group.iteye.com\u002Fgroup\u002Ftopic\u002F39493%23post-258162\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E回复：[HotSpot VM] 想研究HotSpot C2编译器编译过程，请教如何入手？\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E关键词：Sea-of-nodes形式的Program Dependence Graph（PDG）。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E未完待续…\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E采用类似的sea-of-nodes PDG作为IR的编译器还有：\u003Cbr\u002F\u003E\u003Ca class=\" wrap external\" href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fpp.ipd.kit.edu\u002Ffirm\u002F\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003ElibFirm\u003C\u002Fa\u003E。它有个online playground，想了解它的话很容易上手玩，可以看到代码对应的IR图的样子：\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fkreacher.isla-de-muerta.de\u002F~matze\u002Fonline_compiler\u002F\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003EFirm Online Compiler\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fopenjdk.java.net\u002Fprojects\u002Fgraal\u002F\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003EGraal\u003C\u002Fa\u003E 。Graal IR论文 \u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fssw.jku.at\u002FGeneral\u002FStaff\u002FGD\u002FAPPLC-2013-paper_12.pdf\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003EGraal IR: An Extensible Declarative Intermediate Representation\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fwww.cacaojvm.org\u002F\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003ECACAO VM\u003C\u002Fa\u003E的\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fc1.complang.tuwien.ac.at%3A8010\u002Fcompiler2\u002Fdoxygen\u002FCompiler_8hpp.html\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003ESecond-stage Compiler\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fcode.google.com\u002Fp\u002Fv8\u002F\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003EV8 JavaScript Engine\u003C\u002Fa\u003E的\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fchromium.googlesource.com\u002Fv8\u002Fv8.git\u002F%2B\u002Fmaster\u002Fsrc\u002Fcompiler\u002F\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003ETurboFan\u003C\u002Fa\u003E。TurboFan是V8新的优化编译器，目前还在早期开发阶段。如果把V8当前的optimizing compiler跟HotSpot C1类比，那么TurboFan就跟HotSpot C2在一个级别。\u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fsource.android.com\u002Fdevices\u002Ftech\u002Fdalvik\u002F\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003EART\u003C\u002Fa\u003E的\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fandroid.googlesource.com\u002Fplatform\u002Fart\u002F%2B\u002F407d77f344cfbdbbfb50531c5f0766bc0892e2fe\u002Fcompiler\u002Fsea_ir\u002F\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003ESea IR\u003C\u002Fa\u003E（在platform\u002Fart的master上已删除）。Sea IR是ART里基于LLVM的编译器后端的其中一个；主要的基于LLVM的后端是另外一个，叫做Portable，也已经被废弃了；在这俩之前其实还有一个，被Portable替代了。\u003Cbr\u002F\u003EActionScript 3\u002FAVM2的优化器（未发布项目）。Adobe做过一个实验性的AS3优化器，\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E\u003Cb\u003EJamVM\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fjamvm.sourceforge.net\u002F\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003EJamVM\u003C\u002Fa\u003E是一个小巧的JVM实现，麻雀虽小五脏具全。它既可以在桌面、服务器场景中用搭配\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fwww.gnu.org\u002Fsoftware\u002Fclasspath\u002F\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003EGNU Classpath\u003C\u002Fa\u003E或\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fopenjdk.java.net\u002F\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003EOpenJDK\u003C\u002Fa\u003E的类库用于Java SE的实现，也可以在嵌入式场景中用于Java ME的实现。\u003Cbr\u002F\u003EJamVM以C语言实现，在某些配置下使用了GCC的语法扩展（例如\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fgcc.gnu.org\u002Fonlinedocs\u002Fgcc\u002FLabels-as-Values.html\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003Ecomputed goto\u003C\u002Fa\u003E）。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E关键词：Inline-threaded Interpreter\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E题主问的不是编译器的实现么，为啥这里会冒出解释器？\u003Cbr\u002F\u003E因为“inline-threaded interpreter”还有另一个名字，“code-copying JIT”，或者叫“template-based JIT”；每种叫法的侧重点、出发点不同，但所指的东西其实是一样的。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E一个字节码解释器可以组织为每个opcode有一个对应的执行程序（handler）。既然opcode到handler的对应关系是固定的，而我们又可以知道一个要执行的方法里的所有字节码，那么把每条字节码指令对应的handler代码拷贝出来粘合在一起，不就做成一个编译器了么？\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E这种做法的好处是：\u003Cbr\u002F\u003E\u003Cul\u003E\u003Cli\u003E可以作为解释器性能升级的一个简单路径，写解释器的代码而得到初级编译器的性能。事实上JamVM的解释器可以配置为多种实现方式：switch-threading、indirect-threading、direct-threading、inline-threading，它们的差别仅在于对opcode的dispatch方式不同；所有实现方式都共享同一份handler代码。\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cbr\u002F\u003E这种做法的缺点是：\u003Cbr\u002F\u003E\u003Cul\u003E\u003Cli\u003E这样写得到的“编译器”无论从代码组织还是程序思路都还是解释器的那套，从编译器的角度看很别扭。它最终实现出来效果跟从编译器角度出发的template-based JIT一样，但我觉得后者的思路更直观，代码也通常更清晰一些。\u003C\u002Fli\u003E\u003Cli\u003E这种做法仍然无法跨越字节码边界做任何优化，因为每个opcode对应一个单独的handler，而这种做法的代码生成仅仅是把handler拷贝到一起而已。\u003C\u002Fli\u003E\u003Cli\u003E要在它的基础之上进一步提高性能可以直接对字节码序列做些简单模式匹配，以便跨越字节码边界做优化。但这样做通常是自讨苦吃，工程上很难持续下去。\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cbr\u002F\u003E贴一小块代码给大家感受一下“一套解释器，多种实现”是什么样子的。熟悉C语言的同学肯定猜到了，这意味着一大堆奇怪的宏…\u003Cbr\u002F\u003E\u003Cbr\u002F\u003Esrc\u002Finterp\u002Fengine\u002Finterp.c\u003Cbr\u002F\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-c\"\u003E\u003Cspan class=\"n\"\u003Euintptr_t\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E*\u003C\u002Fspan\u003E\u003Cspan class=\"nf\"\u003EexecuteJava\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E()\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"cm\"\u003E\u002F* Definitions specific to the particular\n\u003C\u002Fspan\u003E\u003Cspan class=\"cm\"\u003E       interpreter variant *\u002F\u003C\u002Fspan\u003E\n    \u003Cspan class=\"n\"\u003EINTERPRETER_DEFINITIONS\u003C\u002Fspan\u003E\n\n   \u003Cspan class=\"cm\"\u003E\u002F* Caching is supported in all variants and\n\u003C\u002Fspan\u003E\u003Cspan class=\"cm\"\u003E      may be enabled or disabled *\u002F\u003C\u002Fspan\u003E\n\u003Cspan class=\"cp\"\u003E#ifdef USE_CACHE\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\u003C\u002Fspan\u003E    \u003Cspan class=\"k\"\u003Eunion\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n        \u003Cspan class=\"k\"\u003Estruct\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n            \u003Cspan class=\"n\"\u003Euintptr_t\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ev1\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n            \u003Cspan class=\"n\"\u003Euintptr_t\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ev2\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ei\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"n\"\u003Eint64_t\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003El\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Ecache\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"cp\"\u003E#endif\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\u003C\u002Fspan\u003E\n    \u003Cspan class=\"cm\"\u003E\u002F* Variable definitions holding the interpreter\n\u003C\u002Fspan\u003E\u003Cspan class=\"cm\"\u003E       state.  These are common to all interpreter\n\u003C\u002Fspan\u003E\u003Cspan class=\"cm\"\u003E       variants *\u002F\u003C\u002Fspan\u003E\n    \u003Cspan class=\"n\"\u003Euintptr_t\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E*\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Earg1\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"k\"\u003Eregister\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003ECodePntr\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Epc\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"n\"\u003EExecEnv\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E*\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eee\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003EgetExecEnv\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E();\u003C\u002Fspan\u003E\n    \u003Cspan class=\"n\"\u003EFrame\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E*\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eframe\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eee\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Elast_frame\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"k\"\u003Eregister\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Euintptr_t\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E*\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Elvars\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eframe\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Elvars\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"k\"\u003Eregister\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Euintptr_t\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E*\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eostack\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eframe\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eostack\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"n\"\u003EObject\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E*\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ethis\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003EObject\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E*\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Elvars\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"mi\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E];\u003C\u002Fspan\u003E\n    \u003Cspan class=\"n\"\u003EMethodBlock\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E*\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Enew_mb\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E*\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Emb\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"n\"\u003Eframe\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Emb\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"n\"\u003EConstantPool\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E*\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ecp\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E&amp;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003ECLASS_CB\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Emb\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Eclass\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Econstant_pool\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"cm\"\u003E\u002F* Initialise pc to the start of the method.  If it\n\u003C\u002Fspan\u003E\u003Cspan class=\"cm\"\u003E       hasn&#39;t been executed before it may need preparing *\u002F\u003C\u002Fspan\u003E\n    \u003Cspan class=\"n\"\u003EPREPARE_MB\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Emb\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E);\u003C\u002Fspan\u003E\n    \u003Cspan class=\"n\"\u003Epc\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003ECodePntr\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Emb\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E-&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"n\"\u003Ecode\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"cm\"\u003E\u002F* The initial dispatch code - this is specific to\n\u003C\u002Fspan\u003E\u003Cspan class=\"cm\"\u003E       the interpreter variant *\u002F\u003C\u002Fspan\u003E\n    \u003Cspan class=\"n\"\u003EINTERPRETER_PROLOGUE\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"cm\"\u003E\u002F* Definitions of the opcode handlers *\u002F\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"cp\"\u003E#define MULTI_LEVEL_OPCODES(level)                         \\\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E    DEF_OPC(OPC_ICONST_M1, level,                          \\\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E        PUSH_##level(-1, 1);                               \\\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E    )                                                      \\\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\u003C\u002Fspan\u003E    \u003Cspan class=\"cm\"\u003E\u002F* ... *\u002F\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E这是解释器核心的共享部分。\u003Cbr\u002F\u003E然后来看switch-threading版的一些宏定义：\u003Cbr\u002F\u003Esrc\u002Finterp\u002Fengine\u002Finterp-indirect.h\u003Cbr\u002F\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-c\"\u003E\u003Cspan class=\"cp\"\u003E#define INTERPRETER_DEFINITIONS                            \\\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E    \u003C\u002Fspan\u003E\u003Cspan class=\"cm\"\u003E\u002F* none *\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"cp\"\u003E#define DISPATCH_PROLOGUE                                  \\\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E    while(TRUE) {                                          \\\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E        switch(*pc) {                                      \\\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E            default:\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"cp\"\u003E#define label(x, y, z)                          \\\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E    case x:\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"cp\"\u003E#define DISPATCH(level, ins_len)                \\\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E{                                               \\\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E    pc += ins_len;                              \\\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E    break;                                      \\\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E}\n\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E这样编译出来的解释器就是大家耳熟能详的 while (TRUE) { switch { ... } }形式。\u003Cbr\u002F\u003E然后看看indirect-threading版：\u003Cbr\u002F\u003Esrc\u002Finterp\u002Fengine\u002Finterp-indirect.h\u003Cbr\u002F\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-c\"\u003E\u003Cspan class=\"cp\"\u003E#define INTERPRETER_DEFINITIONS                            \\\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E    DEFINE_HANDLER_TABLES\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"cp\"\u003E#define DISPATCH_PROLOGUE                                  \\\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E    DISPATCH_FIRST                                         \\\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003Eunused:\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"cp\"\u003E#if (__GNUC__ == 2) &amp;&amp; (__GNUC_MINOR__ &lt;= 95)\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E#define label(x, y, z)                          \\\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003Eopc##x##_##y##_##z##:\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E#else\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E#define label(x, y, z)                          \\\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003Eopc##x##_##y##_##z:\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E#endif\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"cp\"\u003E#define DISPATCH(level, ins_len)                \\\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E{                                               \\\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E    pc += ins_len;                              \\\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E    goto *handlers_##level##_ENTRY[*pc];        \\\n\u003C\u002Fspan\u003E\u003Cspan class=\"cp\"\u003E}\n\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E这样编译出来的解释器就是使用了GCC的computed goto语法扩展的indirect-threading（或者叫token-threading）。\u003Cbr\u002F\u003E然后是这一节的关键字，inline-threading…代码贴出来太麻烦，大家自己去看吧：\u003Cbr\u002F\u003Esrc\u002Finterp\u002Fengine\u002Finterp-inlining.h\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E类似的做法在更早的解释器就已经有所应用。例子之一是\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fwww.sablevm.org\u002F\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003ESableVM\u003C\u002Fa\u003E。\u003Cbr\u002F\u003E描述SableVM做法的论文：\u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fciteseerx.ist.psu.edu\u002Fviewdoc\u002Fsummary%3Fdoi%3D10.1.1.90.8603\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003EEffective inline-threaded interpretation of Java bytecode using preparation sequences\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E\u003Cb\u003ESquirrelFish Extreme (SFX)\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\u003Cbr\u002F\u003ESFX是Apple JavaScriptCore的一个比较老（2008年）的实现，参考 \u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fwww.webkit.org\u002Fblog\u002F214\u002Fintroducing-squirrelfish-extreme\u002F\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003EIntroducing SquirrelFish Extreme\u003C\u002Fa\u003E；宣传中的代号是Nitro。后来新的JavaScriptCore有了更正常、传统一些的编译器，但这里我想写的是链接中描述的老的“Context-threaded JIT”。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fwww.cs.toronto.edu\u002Fsyslab\u002Fpubs\u002Fdemkea_context.ps\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003EContext Threading: A flexible and efficient dispatch technique for virtual machine interpreters\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E这是比inline-threading略弱的、介于解释器与编译器之间的一种实现方式。\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E未完待续…\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E\u003Cb\u003EManaged JScript\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fblogs.msdn.com\u002Fb\u002Fdeepak\u002Farchive\u002F2007\u002F05\u002F02\u002Fmanaged-jscript-is-availaible.aspx\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003EManaged JScript\u003C\u002Fa\u003E是微软基于\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fdlr.codeplex.com\u002F\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003EDynamic Language Runtime\u003C\u002Fa\u003E（DLR）实现的JavaScript引擎。当初目标是完全兼容ECMAScript 3标准。做到一半项目被坎，所以Managed JScript从来没有正式发布过。最后发布的版本是在Silverlight Dynamic Language SDK 0.4.0带的那个。\u003Cbr\u002F\u003E关于它的背景，请参考链接帖：\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fhllvm.group.iteye.com\u002Fgroup\u002Ftopic\u002F37596%3Fpage%3D2%23post-243750\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E[链接帖] 各JavaScript引擎的简介，及相关资料\u002F博客收集帖讨论第2页\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E要拿这种已死的老项目出来举栗子是因为它的parser挺特别：使用纯运算符优先级（operator precedence）形式的自顶向下parser。\u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fjavascript.crockford.com\u002Ftdop\u002Ftdop.html\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003ETop Down Operator Precedence\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\u003Cbr\u002F\u003E未完待续…\u003Cbr\u002F\u003E\u003Cbr\u002F\u003ETODO\u003Cbr\u002F\u003E\u003Cbr\u002F\u003EDynamic Superinstruction\u003Cbr\u002F\u003Ecompiler benchmark cheating LINPACK DONGARRA FORTRAN","editableContent":"","excerpt":"草稿不发容易坑…这个还是先发了占坑再慢慢更新好了。有啥建议分析的东西欢迎在回复里提～ 要说编译器实现的巧妙思想，很多都是用来解决工程性问题的，跟编译原理中的算法（解决抽象概念问题 \u002F 学术问题）未必有直接关系。 题主是更想知道某个算法在具体实现中的特点或者说应用方式呢，还是更想了解工程方面的问题呢？ 我觉得前者应该有很多人会给出非常有趣的回答，我就主要回答后者的方面吧。解决工程性问题的巧妙技巧也挺吸引…","collapsedBy":"nobody","collapseReason":"","annotationAction":null,"markInfos":[],"relevantInfo":{"isRelevant":false,"relevantType":"","relevantText":""},"suggestEdit":{"reason":"","status":false,"tip":"","title":"","unnormalDetails":{"status":"","description":"","reason":"","reasonId":0,"note":""},"url":""},"isLabeled":false,"rewardInfo":{"canOpenReward":false,"isRewardable":false,"rewardMemberCount":0,"rewardTotalMoney":0,"tagline":""},"relationship":{"isAuthor":false,"isAuthorized":false,"isNothelp":false,"isThanked":false,"isRecognized":false,"voting":0,"upvotedFollowees":[]},"adAnswer":null},"86680478":{"id":86680478,"type":"answer","answerType":"normal","question":{"type":"question","id":27943883,"title":"编译器具体实现中比较巧妙的思想有哪些？","questionType":"normal","created":1422888793,"updatedTime":1422900159,"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fquestions\u002F27943883","relationship":{}},"author":{"id":"cb5a94306c4658b01c572cf663d65bea","urlToken":"stevenknown","name":"stevenknown","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-2a9c4e65ab4c7044fdceb1c2a95a5495_l.jpg?source=1940ef5c","avatarUrlTemplate":"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-2a9c4e65ab4c7044fdceb1c2a95a5495.jpg?source=1940ef5c","isOrg":false,"type":"people","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fpeople\u002Fcb5a94306c4658b01c572cf663d65bea","userType":"people","headline":"","badge":[],"badgeV2":{"title":"","mergedBadges":[],"detailBadges":[],"icon":"","nightIcon":""},"gender":1,"isAdvertiser":false,"followerCount":237,"isFollowed":false,"isPrivacy":false},"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fanswers\u002F86680478","isCollapsed":false,"createdTime":1455679623,"updatedTime":1455679623,"extras":"","isCopyable":true,"isNormal":true,"voteupCount":6,"commentCount":5,"isSticky":false,"adminClosedComment":false,"commentPermission":"all","canComment":{"reason":"","status":true},"reshipmentSettings":"allowed","content":"巧妙思想不太好描述，有做编译的朋友基于做机器学习改进 phase order的，有利用退火算法改进指令调度以及Cluster Assign的（因为体系结构的原因，效果不是很好），还有编译器里有使用规划论理论进行优化算法设计的，比如这个，簇间数据传输操作插入方法及装置 (效果很好，google一下)\u003Cbr\u002F\u003E\t\t\t不过如果楼主想了解具体编译器实现里有哪些技巧，\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fgithub.com\u002Fstevenknown\u002Fxoc\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E\u003Cspan class=\"invisible\"\u003Ehttp:\u002F\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"visible\"\u003Egithub.com\u002Fstevenknown\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"invisible\"\u003Exoc\u003C\u002Fspan\u003E\u003Cspan class=\"ellipsis\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E 都有实现， 我们做了一个 JavaScript 的静态类型推导项目就是基于 XOC 实现的（但是目前还没开源），涉及到的相关知识包括 Damas Milner adaptive algorithm, JS Language Lattice 等，这些在 XOC 的 IR 上实现很方便。","editableContent":"","excerpt":"巧妙思想不太好描述，有做编译的朋友基于做机器学习改进 phase order的，有利用退火算法改进指令调度以及Cluster Assign的（因为体系结构的原因，效果不是很好），还有编译器里有使用规划论理论进行优化算法设计的，比如这个，簇间数据传输操作插入方法及装置 (效果很好，google一下) \t\t\t不过如果楼主想了解具体编译器实现里有哪些技巧，http:\u002F\u002Fgithub.com\u002Fstevenknown\u002Fxoc 都有实现， 我们做了一个 JavaScript 的静态类型推导项目就是基于 XO…","collapsedBy":"nobody","collapseReason":"","annotationAction":null,"markInfos":[],"relevantInfo":{"isRelevant":false,"relevantType":"","relevantText":""},"suggestEdit":{"reason":"","status":false,"tip":"","title":"","unnormalDetails":{"status":"","description":"","reason":"","reasonId":0,"note":""},"url":""},"isLabeled":false,"rewardInfo":{"canOpenReward":false,"isRewardable":false,"rewardMemberCount":0,"rewardTotalMoney":0,"tagline":""},"relationship":{"isAuthor":false,"isAuthorized":false,"isNothelp":false,"isThanked":false,"isRecognized":false,"voting":0,"upvotedFollowees":[]},"adAnswer":null},"86709631":{"id":86709631,"type":"answer","answerType":"normal","question":{"type":"question","id":27943883,"title":"编译器具体实现中比较巧妙的思想有哪些？","questionType":"normal","created":1422888793,"updatedTime":1422900159,"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fquestions\u002F27943883","relationship":{}},"author":{"id":"421ae9014cf4b66993c52d390e505440","urlToken":"xtlisk","name":"冒泡","avatarUrl":"https:\u002F\u002Fpic3.zhimg.com\u002Fda8e974dc_l.jpg?source=1940ef5c","avatarUrlTemplate":"https:\u002F\u002Fpic2.zhimg.com\u002Fda8e974dc.jpg?source=1940ef5c","isOrg":false,"type":"people","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fpeople\u002F421ae9014cf4b66993c52d390e505440","userType":"people","headline":"IT为主，兴趣广泛，爱好强答","badge":[],"badgeV2":{"title":"","mergedBadges":[],"detailBadges":[],"icon":"","nightIcon":""},"gender":1,"isAdvertiser":false,"followerCount":11603,"isFollowed":false,"isPrivacy":false},"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fanswers\u002F86709631","isCollapsed":false,"createdTime":1455691639,"updatedTime":1455691639,"extras":"","isCopyable":true,"isNormal":true,"voteupCount":1,"commentCount":0,"isSticky":false,"adminClosedComment":false,"commentPermission":"all","canComment":{"reason":"","status":true},"reshipmentSettings":"allowed","content":"技巧很多，这里举两个解释器的例子\u003Cbr\u002F\u003E一个是python的指令预测提速，\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fblog.csdn.net\u002Fxtlisk\u002Farticle\u002Fdetails\u002F39098807\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003Ethreaded code和指令预测\u003C\u002Fa\u003E\u003Cbr\u002F\u003E另一个是GC的例子，如何实现一个简单的渐进式的mark-sweep呢？有人想到了这个办法：利用linux进程的copy-on-write特性，在需要gc的时候fork一个子进程进行标记，子进程将垃圾的地址通过通讯回传给父进程进行释放，父进程这段时间就可以不用stop啦，很早就有人实验过，只是这个办法并不是那么好用，不过，这个思想被一些地方借鉴，比如redis的数据快照就是这么干的","editableContent":"","excerpt":"技巧很多，这里举两个解释器的例子 一个是python的指令预测提速，threaded code和指令预测 另一个是GC的例子，如何实现一个简单的渐进式的mark-sweep呢？有人想到了这个办法：利用linux进程的copy-on-write特性，在需要gc的时候fork一个子进程进行标记，子进程将垃圾的地址通过通讯回传给父进程进行释放，父进程这段时间就可以不用stop啦，很早就有人实验过，只是这个办法并不是那么好用，不过，这个思想被一些地方借鉴，比如red…","collapsedBy":"nobody","collapseReason":"","annotationAction":null,"markInfos":[],"relevantInfo":{"isRelevant":false,"relevantType":"","relevantText":""},"suggestEdit":{"reason":"","status":false,"tip":"","title":"","unnormalDetails":{"status":"","description":"","reason":"","reasonId":0,"note":""},"url":""},"isLabeled":false,"rewardInfo":{"canOpenReward":false,"isRewardable":false,"rewardMemberCount":0,"rewardTotalMoney":0,"tagline":""},"relationship":{"isAuthor":false,"isAuthorized":false,"isNothelp":false,"isThanked":false,"isRecognized":false,"voting":0,"upvotedFollowees":[]},"adAnswer":null},"222466800":{"id":222466800,"type":"answer","answerType":"normal","question":{"type":"question","id":27943883,"title":"编译器具体实现中比较巧妙的思想有哪些？","questionType":"normal","created":1422888793,"updatedTime":1422900159,"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fquestions\u002F27943883","relationship":{}},"author":{"id":"fceedb2366abdabee80fff9d2bc279dd","urlToken":"","name":"知乎用户","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002Fda8e974dc_l.jpg?source=1940ef5c","avatarUrlTemplate":"https:\u002F\u002Fpic4.zhimg.com\u002Fda8e974dc.jpg?source=1940ef5c","isOrg":false,"type":"people","url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fpeople\u002F0","userType":"people","headline":"","badge":[],"badgeV2":{"title":"","mergedBadges":[],"detailBadges":[],"icon":"","nightIcon":""},"gender":1,"isAdvertiser":false,"followerCount":357,"isFollowed":false,"isPrivacy":true},"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fanswers\u002F222466800","isCollapsed":false,"createdTime":1504010408,"updatedTime":1504010409,"extras":"","isCopyable":true,"isNormal":true,"voteupCount":0,"commentCount":0,"isSticky":false,"adminClosedComment":false,"commentPermission":"all","canComment":{"reason":"","status":true},"reshipmentSettings":"allowed","content":"语法和实现分离，可以容易的修改编译器。\u003Cbr\u002F\u003E甚至可以同时处理多种语言。","editableContent":"","excerpt":"语法和实现分离，可以容易的修改编译器。 甚至可以同时处理多种语言。","collapsedBy":"nobody","collapseReason":"","annotationAction":null,"markInfos":[],"relevantInfo":{"isRelevant":false,"relevantType":"","relevantText":""},"suggestEdit":{"reason":"","status":false,"tip":"","title":"","unnormalDetails":{"status":"","description":"","reason":"","reasonId":0,"note":""},"url":""},"isLabeled":false,"rewardInfo":{"canOpenReward":false,"isRewardable":false,"rewardMemberCount":0,"rewardTotalMoney":0,"tagline":""},"relationship":{"isAuthor":false,"isAuthorized":false,"isNothelp":false,"isThanked":false,"isRecognized":false,"voting":0,"upvotedFollowees":[]},"adAnswer":null}},"articles":{},"columns":{},"topics":{},"roundtables":{},"favlists":{},"comments":{},"notifications":{},"ebooks":{},"activities":{},"feeds":{},"pins":{},"promotions":{},"drafts":{},"chats":{},"posts":{},"clubs":{},"clubTags":{}},"currentUser":"","account":{"lockLevel":{},"unlockTicketStatus":false,"unlockTicket":null,"challenge":[],"errorStatus":false,"message":"","isFetching":false,"accountInfo":{},"urlToken":{"loading":false}},"settings":{"socialBind":null,"inboxMsg":null,"notification":{},"email":{},"privacyFlag":null,"blockedUsers":{"isFetching":false,"paging":{"pageNo":1,"pageSize":6},"data":[]},"blockedFollowees":{"isFetching":false,"paging":{"pageNo":1,"pageSize":6},"data":[]},"ignoredTopics":{"isFetching":false,"paging":{"pageNo":1,"pageSize":6},"data":[]},"restrictedTopics":null,"laboratory":{}},"notification":{},"people":{"profileStatus":{},"activitiesByUser":{},"answersByUser":{},"answersSortByVotesByUser":{},"answersIncludedByUser":{},"votedAnswersByUser":{},"thankedAnswersByUser":{},"voteAnswersByUser":{},"thankAnswersByUser":{},"topicAnswersByUser":{},"zvideosByUser":{},"articlesByUser":{},"articlesSortByVotesByUser":{},"articlesIncludedByUser":{},"pinsByUser":{},"questionsByUser":{},"commercialQuestionsByUser":{},"favlistsByUser":{},"followingByUser":{},"followersByUser":{},"mutualsByUser":{},"followingColumnsByUser":{},"followingQuestionsByUser":{},"followingFavlistsByUser":{},"followingTopicsByUser":{},"publicationsByUser":{},"columnsByUser":{},"allFavlistsByUser":{},"brands":null,"creationsByUser":{},"creationsSortByVotesByUser":{},"creationsFeed":{},"infinity":{}},"env":{"ab":{"config":{"experiments":[{"expId":"launch-qa_cl_guest-2","expPrefix":"qa_cl_guest","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-se_item-3","expPrefix":"se_item","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_andplay_d-2","expPrefix":"vd_andplay_d","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_hookupplay_an-2","expPrefix":"vd_hookupplay_an","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_timeguide-2","expPrefix":"vd_timeguide","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_video_replay-3","expPrefix":"vd_video_replay","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_zvideo_link-10","expPrefix":"vd_zvideo_link","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"zanswer-2","expPrefix":"zanswer","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"recnew_2th-3","expPrefix":"recnew_2th","isDynamicallyUpdated":false,"isRuntime":false,"includeTriggerInfo":false},{"expId":"captcha_v2-2_v10","expPrefix":"captcha_v2","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"Test_Punk-1_v2","expPrefix":"Test_Punk","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"meta_ebook-2_v1","expPrefix":"meta_ebook","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"club_fn-1_v4","expPrefix":"club_fn","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"webpImg-1_v3","expPrefix":"webpImg","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"general_1-2_v1","expPrefix":"general_1","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"correct_gpu-6_v5","expPrefix":"correct_gpu","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"correct_pos-4_v2","expPrefix":"correct_pos","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"se_cvr_boost-3_v1","expPrefix":"se_cvr_boost","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"se_doc_cnt-1_v6","expPrefix":"se_doc_cnt","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"rec_new2th-2_v3","expPrefix":"rec_new2th","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"se_zp_five-4_v1","expPrefix":"se_zp_five","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"se_cbert-3_v2","expPrefix":"se_cbert","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"hw_aa_30-1_v2","expPrefix":"hw_aa_30","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"hw_aa_50-1_v1","expPrefix":"hw_aa_50","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false}],"params":[{"id":"qap_question_author","type":"String","value":"0","chainId":"_all_","layerId":"qapqa_layer_2"},{"id":"web_column_auto_invite","type":"String","value":"0","layerId":"webqa_layer_1"},{"id":"gue_bullet_second","type":"String","value":"1","layerId":"guevd_layer_1"},{"id":"gue_zvideo_link","type":"String","value":"1","layerId":"guevd_layer_2"},{"id":"se_fix_ebook","type":"Int","value":"0","chainId":"_gene_","layerId":"se_fix_ebook","key":103},{"id":"ge_rec_sup","type":"Int","value":"0","chainId":"_gene_","layerId":"ge_rec_sup","key":197},{"id":"se_zp_five","type":"Int","value":"1","chainId":"_gene_","layerId":"se_zp_five","key":344},{"id":"li_panswer_topic","type":"String","value":"0","chainId":"_all_","layerId":"lili_layer_602"},{"id":"gue_sharp","type":"String","value":"1","layerId":"guevd_layer_686"},{"id":"ge_relation2","type":"String","value":"1","chainId":"_gene_","layerId":"gese_layer_815","key":2796},{"id":"ge_meta_ss","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_834","key":3079},{"id":"ge_guess","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_938","key":2912},{"id":"ge_entity","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_946","key":3036},{"id":"meta_ebook","type":"Int","value":"1","layerId":"meta_ebook"},{"id":"zanswer","type":"Int","value":"1","layerId":"zanswer"},{"id":"hw_aa_30","type":"Int","value":"0","chainId":"_gene_","layerId":"hw_aa_30","key":361},{"id":"zr_slotpaidexp","type":"String","value":"1","chainId":"_all_","layerId":"zrrec_layer_5"},{"id":"tp_contents","type":"String","value":"2","chainId":"_all_","layerId":"tptp_layer_627"},{"id":"gue_video_guide","type":"String","value":"1","layerId":"guevd_layer_625"},{"id":"gue_bulletmb","type":"String","value":"0","layerId":"guevd_layer_812"},{"id":"correct_pos","type":"Int","value":"2","chainId":"_gene_","layerId":"correct_pos","key":104},{"id":"web_answerlist_ad","type":"String","value":"0","layerId":"webqa_layer_1"},{"id":"ge_infinity6","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_815","key":2817},{"id":"pf_noti_entry_num","type":"String","value":"0","chainId":"_all_","layerId":"pfus_layer_718"},{"id":"top_test_4_liguangyi","type":"String","value":"1","chainId":"_all_","layerId":"iosus_layer_1"},{"id":"web_sem_ab","type":"String","value":"1","layerId":"webgw_layer_3"},{"id":"gue_cdzixun","type":"String","value":"0","layerId":"gueqa_layer_3"},{"id":"gue_fo_recom","type":"String","value":"0","layerId":"gueqa_layer_780"},{"id":"ge_prf_rec","type":"String","value":"0","chainId":"_gene_","layerId":"getop_layer_991","key":3040},{"id":"web_heifetz_grow_ad","type":"String","value":"1","layerId":"webgw_layer_3"},{"id":"gue_visit_n_artcard","type":"String","value":"1","layerId":"gueqa_layer_579"},{"id":"ge_usercard1","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_742","key":2740},{"id":"li_vip_verti_search","type":"String","value":"0","chainId":"_all_","layerId":"lili_layer_2"},{"id":"li_video_section","type":"String","value":"0","chainId":"_all_","layerId":"lili_layer_7"},{"id":"gue_art2qa","type":"String","value":"0","layerId":"gueqa_layer_579"},{"id":"se_ffzx_jushen1","type":"String","value":"0","chainId":"_all_","layerId":"sese_layer_4"},{"id":"pfd_newbie","type":"Int","value":"0","chainId":"_gene_","layerId":"pfd_newbie","key":63},{"id":"ge_newbie3","type":"Int","value":"0","chainId":"_gene_","layerId":"ge_newbie3","key":180},{"id":"rec_new2th","type":"Int","value":"1","chainId":"_gene_","layerId":"Hump","key":320},{"id":"ge_rec_2th","type":"String","value":"11","chainId":"_gene_","layerId":"geli_layer_965","key":3023},{"id":"gue_iosplay","type":"String","value":"0","layerId":"guevd_layer_896"},{"id":"ge_yuzhi_v1","type":"String","value":"1","chainId":"_gene_","layerId":"gese_layer_1029","key":3127},{"id":"tp_topic_style","type":"String","value":"0","chainId":"_all_","layerId":"tptp_layer_4"},{"id":"ge_newyanzhi","type":"String","value":"0","chainId":"_gene_","layerId":"geus_layer_1019","key":2788},{"id":"captcha_v2","type":"Int","value":"1","layerId":"captcha_v2"},{"id":"pfd_newbie2","type":"Int","value":"0","chainId":"_gene_","layerId":"pfd_newbie2","key":71},{"id":"se_doc_cnt","type":"Int","value":"0","chainId":"_gene_","layerId":"uD1x","key":302},{"id":"ge_hard_s_ma","type":"String","value":"0","chainId":"_gene_","layerId":"geli_layer_856","key":3031},{"id":"gue_repost","type":"String","value":"0","layerId":"gueqa_layer_671"},{"id":"ge_sxzx","type":"String","value":"0","chainId":"_gene_","layerId":"gere_layer_990","key":3060},{"id":"ge_sug_v2","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_1000","key":3189},{"id":"general_1","type":"Int","value":"2","chainId":"_gene_","layerId":"general_1","key":8},{"id":"correct_gpu","type":"Int","value":"5","chainId":"_gene_","layerId":"correct_gpu","key":66},{"id":"recnew_2th","type":"Int","value":"21","chainId":"_gene_","layerId":"recnew_2th","key":67},{"id":"ge_video","type":"String","value":"0","chainId":"_gene_","layerId":"geli_layer_856","key":2831},{"id":"ge_upload","type":"String","value":"0","chainId":"_gene_","layerId":"geus_layer_839","key":2892},{"id":"gue_playh_an","type":"String","value":"1","layerId":"guevd_layer_622"},{"id":"club_fn","type":"Int","value":"1","layerId":"club_fn"},{"id":"se_cbert","type":"Int","value":"1","chainId":"_gene_","layerId":"qRp6","key":359},{"id":"web_scl_rec","type":"String","value":"0","layerId":"webgw_layer_759"},{"id":"ge_item","type":"String","value":"2","chainId":"_gene_","layerId":"gese_layer_945","key":2971},{"id":"web_answer_list_ad","type":"String","value":"1","layerId":"webqa_layer_4"},{"id":"gue_video_replay","type":"String","value":"2","layerId":"guevd_layer_3"},{"id":"se_cvr_boost","type":"Int","value":"1","chainId":"_gene_","layerId":"se_cvr_boost","key":183},{"id":"li_paid_answer_exp","type":"String","value":"0","chainId":"_all_","layerId":"lili_layer_3"},{"id":"gue_goods_card","type":"String","value":"0","layerId":"gueqa_layer_1"},{"id":"gue_recmess","type":"String","value":"0","layerId":"gueqa_layer_795"},{"id":"gue_andplayd","type":"String","value":"1","layerId":"guevd_layer_686"},{"id":"webpImg","type":"Int","value":"1","layerId":"JnVt"},{"id":"li_sp_mqbk","type":"String","value":"0","chainId":"_all_","layerId":"lili_layer_748"},{"id":"tp_zrec","type":"String","value":"0","chainId":"_all_","layerId":"tptp_layer_619"},{"id":"ge_newcard","type":"String","value":"3","chainId":"_gene_","layerId":"geus_layer_839","key":2997},{"id":"qap_question_visitor","type":"String","value":" 0","chainId":"_all_","layerId":"qapqa_layer_2"},{"id":"zr_expslotpaid","type":"String","value":"1","chainId":"_all_","layerId":"zrrec_layer_11"},{"id":"web_audit_01","type":"String","value":"case1","layerId":"webre_layer_1"},{"id":"ge_v_rank_v3","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_1047","key":2966},{"id":"se_4a","type":"Int","value":"0","chainId":"_gene_","layerId":"rtiq","key":335},{"id":"li_edu_page","type":"String","value":"old","chainId":"_all_","layerId":"lili_layer_580"},{"id":"gue_q_share","type":"String","value":"0","layerId":"gueqa_layer_647"},{"id":"gue_messrec","type":"String","value":"0","layerId":"gueqa_layer_769"},{"id":"ge_dipin_pre","type":"String","value":"0","chainId":"_gene_","layerId":"gese_layer_1000","key":3124},{"id":"ge_search_ui","type":"String","value":"1","chainId":"_gene_","layerId":"gese_layer_838","key":2898},{"id":"gue_bullet_guide","type":"String","value":"发个弹幕聊聊…","layerId":"guevd_layer_0"},{"id":"hw_aa_50","type":"Int","value":"0","chainId":"_gene_","layerId":"hw_aa_50","key":362},{"id":"ge_sug_rep","type":"String","value":"1","chainId":"_gene_","layerId":"gese_layer_1034","key":3158},{"id":"gue_v_serial","type":"String","value":"1","layerId":"guevd_layer_695"},{"id":"gue_vid_tab","type":"String","value":"0","layerId":"guevd_layer_900"},{"id":"tp_dingyue_video","type":"String","value":"0","chainId":"_all_","layerId":"tptp_layer_4"},{"id":"gue_profile_video","type":"String","value":"1","layerId":"guevd_layer_5"},{"id":"se_prerank","type":"Int","value":"0","chainId":"_gene_","layerId":"6XUc","key":354},{"id":"web_login","type":"String","value":"0","layerId":"webgw_layer_759"},{"id":"gue_card_test","type":"String","value":"1","layerId":"gueqa_layer_2"},{"id":"gue_art_ui","type":"String","value":"0","layerId":"gueqa_layer_647"},{"id":"pf_adjust","type":"String","value":"0","chainId":"_all_","layerId":"pfus_layer_9"},{"id":"Test_Punk","type":"Int","value":"0","layerId":"Test_Punk"},{"id":"show_ad","type":"Int","value":"0","chainId":"_gene_","layerId":"show_ad","key":27},{"id":"web_collection_guest","type":"String","value":"1","layerId":"webqa_layer_4"},{"id":"ge_emoji","type":"String","value":"0","chainId":"_gene_","layerId":"getp_layer_827","key":3209}],"chains":[{"chainId":"_all_"}],"encodedParams":"ClJnAMUAWAHsCgcMYAvcC2kBaAABC+ALtAo\u002FALQAQAHPCzcM5ApHAC4B1wv0C3UMCABCAEMADwtMC2cBmwu3ALULlgtPATQMUgtqAVYMYgEbAIkMEikAAAEBAAAAAAIAAAAAAAELAQAAAAAAAAIFFQAAAQIBAwAAAAEAAQAAAA=="},"triggers":{}},"userAgent":{"Edge":false,"IE":false,"Wechat":false,"Weibo":false,"QQ":false,"MQQBrowser":false,"Qzone":false,"Mobile":false,"Android":false,"iOS":false,"isAppleDevice":false,"Zhihu":false,"ZhihuHybrid":false,"isBot":false,"Tablet":false,"UC":false,"Sogou":false,"Qihoo":false,"Baidu":false,"BaiduApp":false,"Safari":false,"GoogleBot":false,"AndroidDaily":false,"iOSDaily":false,"WxMiniProgram":false,"BaiduMiniProgram":false,"QQMiniProgram":false,"JDMiniProgram":false,"isWebView":false,"isMiniProgram":false,"origin":"uPic\u002F20200612 CFNetwork\u002F978.0.7 Darwin\u002F18.6.0 (x86_64)"},"appViewConfig":{},"ctx":{"path":"\u002Fquestion\u002F27943883","query":{},"href":"http:\u002F\u002Fwww.zhihu.com\u002Fquestion\u002F27943883","host":"www.zhihu.com"},"trafficSource":"production","edition":{"beijing":false,"baidu":false,"sogou":false,"baiduBeijing":false,"sogouBeijing":false,"sogouInput":false,"baiduSearch":false,"googleSearch":false,"miniProgram":false,"xiaomi":false},"theme":"light","enableShortcut":true,"referer":"","xUDId":"","mode":"ssr","conf":{},"xTrafficFreeOrigin":"","ipInfo":{},"logged":false,"vars":{"passThroughHeaders":{}}},"me":{"columnContributions":[]},"label":{"recognizerLists":{}},"ecommerce":{},"comments":{"pagination":{},"collapsed":{},"reverse":{},"reviewing":{},"conversation":{},"parent":{}},"commentsV2":{"stickers":[],"commentWithPicPermission":{},"notificationsComments":{},"pagination":{},"collapsed":{},"reverse":{},"reviewing":{},"conversation":{},"conversationMore":{},"parent":{}},"pushNotifications":{"default":{"isFetching":false,"isDrained":false,"ids":[]},"follow":{"isFetching":false,"isDrained":false,"ids":[]},"vote_thank":{"isFetching":false,"isDrained":false,"ids":[]},"currentTab":"default","notificationsCount":{"default":0,"follow":0,"vote_thank":0}},"messages":{"data":{},"currentTab":"common","messageCount":0},"register":{"registerValidateSucceeded":null,"registerValidateErrors":{},"registerConfirmError":null,"sendDigitsError":null,"registerConfirmSucceeded":null},"login":{"loginUnregisteredError":false,"loginBindWechatError":false,"loginConfirmError":null,"sendDigitsError":null,"needSMSIdentify":false,"validateDigitsError":false,"loginConfirmSucceeded":null,"qrcodeLoginToken":"","qrcodeLoginScanStatus":0,"qrcodeLoginError":null,"qrcodeLoginReturnNewToken":false},"active":{"sendDigitsError":null,"activeConfirmSucceeded":null,"activeConfirmError":null},"switches":{},"captcha":{"captchaNeeded":false,"captchaValidated":false,"captchaBase64String":null,"captchaValidationMessage":null,"loginCaptchaExpires":false},"sms":{"supportedCountries":[]},"chat":{"chats":{},"inbox":{"recents":{"isFetching":false,"isDrained":false,"isPrevDrained":false,"result":[],"next":null,"key":null},"strangers":{"isFetching":false,"isDrained":false,"isPrevDrained":false,"result":[],"next":null,"key":null},"friends":{"isFetching":false,"isDrained":false,"isPrevDrained":false,"result":[],"next":null,"key":null},"search":{"isFetching":false,"isDrained":false,"isPrevDrained":false,"result":[],"next":null,"key":null},"config":{"newCount":0,"strangerMessageSwitch":false,"strangerMessageUnread":false,"friendCount":0}},"global":{"isChatMqttExisted":false}},"emoticons":{"emoticonGroupList":[],"emoticonGroupDetail":{}},"creator":{"currentCreatorUrlToken":null,"homeData":{"recommendQuestions":[]},"tools":{"question":{"invitationCount":{"questionFolloweeCount":0,"questionTotalCount":0},"goodatTopics":[]},"customPromotion":{"itemLists":{}},"recommend":{"recommendTimes":{}}},"explore":{"academy":{"tabs":[],"article":{}}},"rights":[],"rightsStatus":{},"levelUpperLimit":10,"account":{"growthLevel":{}},"mcn":{},"applyStatus":{},"videoSupport":{},"mcnManage":{},"tasks":{},"recentlyCreated":[]},"question":{"followers":{},"concernedFollowers":{},"answers":{"27943883":{"isFetching":false,"isDrained":false,"ids":[39035471,38764362,86680478,86709631,222466800],"newIds":[39035471,38764362,86680478,86709631,222466800],"totals":6,"isPrevDrained":true,"previous":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fquestions\u002F27943883\u002Fanswers?include=data%5B%2A%5D.is_normal%2Cadmin_closed_comment%2Creward_info%2Cis_collapsed%2Cannotation_action%2Cannotation_detail%2Ccollapse_reason%2Cis_sticky%2Ccollapsed_by%2Csuggest_edit%2Ccomment_count%2Ccan_comment%2Ccontent%2Ceditable_content%2Cattachment%2Cvoteup_count%2Creshipment_settings%2Ccomment_permission%2Ccreated_time%2Cupdated_time%2Creview_info%2Crelevant_info%2Cquestion%2Cexcerpt%2Cis_labeled%2Cpaid_info%2Cpaid_info_content%2Crelationship.is_authorized%2Cis_author%2Cvoting%2Cis_thanked%2Cis_nothelp%2Cis_recognized%3Bdata%5B%2A%5D.mark_infos%5B%2A%5D.url%3Bdata%5B%2A%5D.author.follower_count%2Cbadge%5B%2A%5D.topics%3Bdata%5B%2A%5D.settings.table_of_content.enabled&limit=5&offset=0&platform=desktop&sort_by=default","next":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Fquestions\u002F27943883\u002Fanswers?include=data%5B%2A%5D.is_normal%2Cadmin_closed_comment%2Creward_info%2Cis_collapsed%2Cannotation_action%2Cannotation_detail%2Ccollapse_reason%2Cis_sticky%2Ccollapsed_by%2Csuggest_edit%2Ccomment_count%2Ccan_comment%2Ccontent%2Ceditable_content%2Cattachment%2Cvoteup_count%2Creshipment_settings%2Ccomment_permission%2Ccreated_time%2Cupdated_time%2Creview_info%2Crelevant_info%2Cquestion%2Cexcerpt%2Cis_labeled%2Cpaid_info%2Cpaid_info_content%2Crelationship.is_authorized%2Cis_author%2Cvoting%2Cis_thanked%2Cis_nothelp%2Cis_recognized%3Bdata%5B%2A%5D.mark_infos%5B%2A%5D.url%3Bdata%5B%2A%5D.author.follower_count%2Cbadge%5B%2A%5D.topics%3Bdata%5B%2A%5D.settings.table_of_content.enabled&limit=5&offset=5&platform=desktop&sort_by=default"}},"hiddenAnswers":{},"updatedAnswers":{},"collapsedAnswers":{},"notificationAnswers":{},"invitedQuestions":{"total":{"count":null,"isEnd":false,"isLoading":false,"questions":[]},"followees":{"count":null,"isEnd":false,"isLoading":false,"questions":[]}},"laterQuestions":{"count":null,"globalWriteAnimate":false,"isEnd":false,"isLoading":false,"questions":[]},"waitingQuestions":{"recommend":{"isEnd":false,"isLoading":false,"questions":[]},"hot":{"isEnd":false,"isLoading":false,"questions":[]},"newest":{"isEnd":false,"isLoading":false,"questions":[]},"invite":{"isEnd":false,"isLoading":false,"questions":[]}},"invitationCandidates":{},"inviters":{},"invitees":{},"similarQuestions":{},"relatedCommodities":{},"bio":{},"brand":{},"permission":{},"adverts":{"3":{"ad":{"adVerb":"","brand":{"id":0,"logo":"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-6c915f1916327d2140ad2ed127ab705f_250x250.jpeg","name":"AWS"},"category":1,"clickTracks":["https:\u002F\u002Fsugar.zhihu.com\u002Fplutus_adreaper?idi=8005&tu=https%3A%2F%2Faws.amazon.com%2Ffree%2Fstorage%2F%3Ftrk%3Dba_a134p000003ypeEAAQ%26trkCampaign%3Dacq_paid_media_cn%26sc_channel%3Dba%26sc_campaign%3Dacquisition_CN%26sc_publisher%3DZH%26sc_category%3DStorage%26sc_country%3DCN%26sc_geo%3DCHINA%26sc_outcome%3Dacq%26sc_detail%3Dkeyword%26sc_content%3Dad1%26sc_segment%3D400x224%26sc_medium%3DACQ_CHINA_ZH_TS_Mobile_SU_Storage_Solution_CN_CN_Image__&pf=0&au=22961&nt=0&ut=7f69e052724a410881b4163c8e1782c1&ar=1&pdi=1586771060311459&ed=CjEEfh4wM30tHTNWBmJ7AkYmDHsAbm4kex1_BgEzLh0OdA1-AHM4dX9GZ1AXMTYNWXYPbFkqPn1_FWdeAGF-FhssBHkLc2twfwMxDgxhfQBYcA55HiAufX8DMQgMYGIBXnQLeQ50a3F3HGVSCWV1Fgk1BHkIc3wsOxhiQUQ5cQFTdhd4CHt0cXcdfF8GdjhDVnQPewpyb3Z5E2Gw0lVQQqEylA%3D%3D"],"closeTrack":"https:\u002F\u002Fsugar.zhihu.com\u002Fplutus_adreaper?idi=8005&pf=0&nt=0&tu=https%3A%2F%2Faws.amazon.com%2Ffree%2Fstorage%2F%3Ftrk%3Dba_a134p000003ypeEAAQ%26trkCampaign%3Dacq_paid_media_cn%26sc_channel%3Dba%26sc_campaign%3Dacquisition_CN%26sc_publisher%3DZH%26sc_category%3DStorage%26sc_country%3DCN%26sc_geo%3DCHINA%26sc_outcome%3Dacq%26sc_detail%3Dkeyword%26sc_content%3Dad1%26sc_segment%3D400x224%26sc_medium%3DACQ_CHINA_ZH_TS_Mobile_SU_Storage_Solution_CN_CN_Image__&ut=7f69e052724a410881b4163c8e1782c1&ed=CjEEfR4wM30tHTNWBmJ7AkYmDHsAbm4kex1_BgEzLh0OdA1-AHM4dX9GZ1AXMTYNWXYPbFkqPn1_FWdeAGF-FhssBHkLc2twfwMxDgxhfQBYcA55HiAufX8DMQgMYGIBXnQLeQ50a3F3HGVSCWV1Fgk1BHkIc3wsOxhiQUQ5cQFTdhd4CHt0cXcdfF8GdjhDVnQPewpyb3Z5E2GtmUEtHfFxmQ%3D%3D&pdi=1586771060311459&au=22961&ar=1","closeTracks":["https:\u002F\u002Fsugar.zhihu.com\u002Fplutus_adreaper?idi=8005&pf=0&nt=0&tu=https%3A%2F%2Faws.amazon.com%2Ffree%2Fstorage%2F%3Ftrk%3Dba_a134p000003ypeEAAQ%26trkCampaign%3Dacq_paid_media_cn%26sc_channel%3Dba%26sc_campaign%3Dacquisition_CN%26sc_publisher%3DZH%26sc_category%3DStorage%26sc_country%3DCN%26sc_geo%3DCHINA%26sc_outcome%3Dacq%26sc_detail%3Dkeyword%26sc_content%3Dad1%26sc_segment%3D400x224%26sc_medium%3DACQ_CHINA_ZH_TS_Mobile_SU_Storage_Solution_CN_CN_Image__&ut=7f69e052724a410881b4163c8e1782c1&ed=CjEEfR4wM30tHTNWBmJ7AkYmDHsAbm4kex1_BgEzLh0OdA1-AHM4dX9GZ1AXMTYNWXYPbFkqPn1_FWdeAGF-FhssBHkLc2twfwMxDgxhfQBYcA55HiAufX8DMQgMYGIBXnQLeQ50a3F3HGVSCWV1Fgk1BHkIc3wsOxhiQUQ5cQFTdhd4CHt0cXcdfF8GdjhDVnQPewpyb3Z5E2GtmUEtHfFxmQ%3D%3D&pdi=1586771060311459&au=22961&ar=1"],"conversionTracks":["https:\u002F\u002Fsugar.zhihu.com\u002Fplutus_adreaper?ut=7f69e052724a410881b4163c8e1782c1&ar=1&pdi=1586771060311459&ed=CjEEfx4wM30tHTNWBmJ7AkYmDHsAbm4kex1_BgEzLh0OdA1-AHM4dX9GZ1AXMTYNWXYPbFkqPn1_FWdeAGF-FhssBHkLc2twfwMxDgxhfQBYcA55HiAufX8DMQgMYGIBXnQLeQ50a3F3HGVSCWV1Fgk1BHkIc3wsOxhiQUQ5cQFTdhd4CHt0cXcdfF8GdjhDVnQPewpyb3Z5E2GoUKtE5PL0TA%3D%3D&au=22961&tu=https%3A%2F%2Faws.amazon.com%2Ffree%2Fstorage%2F%3Ftrk%3Dba_a134p000003ypeEAAQ%26trkCampaign%3Dacq_paid_media_cn%26sc_channel%3Dba%26sc_campaign%3Dacquisition_CN%26sc_publisher%3DZH%26sc_category%3DStorage%26sc_country%3DCN%26sc_geo%3DCHINA%26sc_outcome%3Dacq%26sc_detail%3Dkeyword%26sc_content%3Dad1%26sc_segment%3D400x224%26sc_medium%3DACQ_CHINA_ZH_TS_Mobile_SU_Storage_Solution_CN_CN_Image__&pf=0&idi=8005&nt=0"],"creatives":[{"appPromotionUrl":"","brand":{"id":0,"logo":"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-6c915f1916327d2140ad2ed127ab705f_250x250.jpeg","name":"AWS"},"cta":{"value":"查看详情"},"description":"AWS提供全套免费云存储解决方案，为企业数字化转型助力! 6大免费套餐在云中部署存储和内容分发解决方案所需的免费产品和服务，让您的数据更安全。","footer":{"value":""},"landingUrl":"https:\u002F\u002Faws.amazon.com\u002Ffree\u002Fstorage\u002F?trk=ba_a134p000003ypeEAAQ&trkCampaign=acq_paid_media_cn&sc_channel=ba&sc_campaign=acquisition_CN&sc_publisher=ZH&sc_category=Storage&sc_country=CN&sc_geo=CHINA&sc_outcome=acq&sc_detail=keyword&sc_content=ad1&sc_segment=400x224&sc_medium=ACQ_CHINA_ZH_TS_Mobile_SU_Storage_Solution_CN_CN_Image__","title":"哪里有免费的云存储解决方案？"}],"debugTracks":["https:\u002F\u002Fsugar.zhihu.com\u002Fplutus_adreaper?pf=0&au=22961&tu=https%3A%2F%2Faws.amazon.com%2Ffree%2Fstorage%2F%3Ftrk%3Dba_a134p000003ypeEAAQ%26trkCampaign%3Dacq_paid_media_cn%26sc_channel%3Dba%26sc_campaign%3Dacquisition_CN%26sc_publisher%3DZH%26sc_category%3DStorage%26sc_country%3DCN%26sc_geo%3DCHINA%26sc_outcome%3Dacq%26sc_detail%3Dkeyword%26sc_content%3Dad1%26sc_segment%3D400x224%26sc_medium%3DACQ_CHINA_ZH_TS_Mobile_SU_Storage_Solution_CN_CN_Image__&ut=7f69e052724a410881b4163c8e1782c1&ar=1&pdi=1586771060311459&ed=CjEEcx4wM30tHTNWBmJ7AkYmDHsAbm4kex1_BgEzLh0OdA1-AHM4dX9GZ1AXMTYNWXYPbFkqPn1_FWdeAGF-FhssBHkLc2twfwMxDgxhfQBYcA55HiAufX8DMQgMYGIBXnQLeQ50a3F3HGVSCWV1Fgk1BHkIc3wsOxhiQUQ5cQFTdhd4CHt0cXcdfF8GdjhDVnQPewpyb3Z5E2FpeBbQ5lDiDQ%3D%3D&idi=8005&nt=0"],"displayAdvertisingTag":true,"experimentInfo":"{}","id":1059112,"impressionTracks":["https:\u002F\u002Fsugar.zhihu.com\u002Fplutus_adreaper?tu=https%3A%2F%2Faws.amazon.com%2Ffree%2Fstorage%2F%3Ftrk%3Dba_a134p000003ypeEAAQ%26trkCampaign%3Dacq_paid_media_cn%26sc_channel%3Dba%26sc_campaign%3Dacquisition_CN%26sc_publisher%3DZH%26sc_category%3DStorage%26sc_country%3DCN%26sc_geo%3DCHINA%26sc_outcome%3Dacq%26sc_detail%3Dkeyword%26sc_content%3Dad1%26sc_segment%3D400x224%26sc_medium%3DACQ_CHINA_ZH_TS_Mobile_SU_Storage_Solution_CN_CN_Image__&ut=7f69e052724a410881b4163c8e1782c1&idi=8005&pf=0&pdi=1586771060311459&ar=1&au=22961&ed=CjEEeB4wM30tHTNWBmJ7AkYmDHsAbm4kex1_BgEzLh0OdA1-AHM4dX9GZ1AXMTYNWXYPbFkqPn1_FWdeAGF-FhssBHkLc2twfwMxDgxhfQBYcA55HiAufX8DMQgMYGIBXnQLeQ50a3F3HGVSCWV1Fgk1BHkIc3wsOxhiQUQ5cQFTdhd4CHt0cXcdfF8GdjhDVnQPewpyb3Z5E2Fc3bQMwYoNnQ%3D%3D&nt=0"],"isEvergreen":false,"isNewWebview":true,"isSpeeding":false,"isWebp":false,"landPrefetch":false,"name":"","nativePrefetch":true,"partyId":-2,"revertCloseTrack":"https:\u002F\u002Fsugar.zhihu.com\u002Fplutus_adreaper?ar=1&pf=0&nt=0&tu=https%3A%2F%2Faws.amazon.com%2Ffree%2Fstorage%2F%3Ftrk%3Dba_a134p000003ypeEAAQ%26trkCampaign%3Dacq_paid_media_cn%26sc_channel%3Dba%26sc_campaign%3Dacquisition_CN%26sc_publisher%3DZH%26sc_category%3DStorage%26sc_country%3DCN%26sc_geo%3DCHINA%26sc_outcome%3Dacq%26sc_detail%3Dkeyword%26sc_content%3Dad1%26sc_segment%3D400x224%26sc_medium%3DACQ_CHINA_ZH_TS_Mobile_SU_Storage_Solution_CN_CN_Image__&au=22961&ut=7f69e052724a410881b4163c8e1782c1&ed=CjEEch4wM30tHTNWBmJ7AkYmDHsAbm4kex1_BgEzLh0OdA1-AHM4dX9GZ1AXMTYNWXYPbFkqPn1_FWdeAGF-FhssBHkLc2twfwMxDgxhfQBYcA55HiAufX8DMQgMYGIBXnQLeQ50a3F3HGVSCWV1Fgk1BHkIc3wsOxhiQUQ5cQFTdhd4CHt0cXcdfF8GdjhDVnQPewpyb3Z5E2HfariZVJeu7w%3D%3D&pdi=1586771060311459&idi=8005","template":"web_word","viewTrack":"https:\u002F\u002Fsugar.zhihu.com\u002Fplutus_adreaper?au=22961&ut=7f69e052724a410881b4163c8e1782c1&pdi=1586771060311459&ed=CjEEeR4wM30tHTNWBmJ7AkYmDHsAbm4kex1_BgEzLh0OdA1-AHM4dX9GZ1AXMTYNWXYPbFkqPn1_FWdeAGF-FhssBHkLc2twfwMxDgxhfQBYcA55HiAufX8DMQgMYGIBXnQLeQ50a3F3HGVSCWV1Fgk1BHkIc3wsOxhiQUQ5cQFTdhd4CHt0cXcdfF8GdjhDVnQPewpyb3Z5E2FpaV0AIK55Kg%3D%3D&nt=0&pf=0&ar=1&idi=8005&tu=https%3A%2F%2Faws.amazon.com%2Ffree%2Fstorage%2F%3Ftrk%3Dba_a134p000003ypeEAAQ%26trkCampaign%3Dacq_paid_media_cn%26sc_channel%3Dba%26sc_campaign%3Dacquisition_CN%26sc_publisher%3DZH%26sc_category%3DStorage%26sc_country%3DCN%26sc_geo%3DCHINA%26sc_outcome%3Dacq%26sc_detail%3Dkeyword%26sc_content%3Dad1%26sc_segment%3D400x224%26sc_medium%3DACQ_CHINA_ZH_TS_Mobile_SU_Storage_Solution_CN_CN_Image__","viewTracks":["https:\u002F\u002Fsugar.zhihu.com\u002Fplutus_adreaper?au=22961&ut=7f69e052724a410881b4163c8e1782c1&pdi=1586771060311459&ed=CjEEeR4wM30tHTNWBmJ7AkYmDHsAbm4kex1_BgEzLh0OdA1-AHM4dX9GZ1AXMTYNWXYPbFkqPn1_FWdeAGF-FhssBHkLc2twfwMxDgxhfQBYcA55HiAufX8DMQgMYGIBXnQLeQ50a3F3HGVSCWV1Fgk1BHkIc3wsOxhiQUQ5cQFTdhd4CHt0cXcdfF8GdjhDVnQPewpyb3Z5E2FpaV0AIK55Kg%3D%3D&nt=0&pf=0&ar=1&idi=8005&tu=https%3A%2F%2Faws.amazon.com%2Ffree%2Fstorage%2F%3Ftrk%3Dba_a134p000003ypeEAAQ%26trkCampaign%3Dacq_paid_media_cn%26sc_channel%3Dba%26sc_campaign%3Dacquisition_CN%26sc_publisher%3DZH%26sc_category%3DStorage%26sc_country%3DCN%26sc_geo%3DCHINA%26sc_outcome%3Dacq%26sc_detail%3Dkeyword%26sc_content%3Dad1%26sc_segment%3D400x224%26sc_medium%3DACQ_CHINA_ZH_TS_Mobile_SU_Storage_Solution_CN_CN_Image__"],"zaAdInfo":"CKjSQBDsASIBMV0fL8BOYNWtQw==","zaAdInfoJson":"{\"ad_id\":1059112,\"ad_zone_id\":236,\"category\":\"1\",\"timestamp\":1612156800,\"creative_id\":1103573}"},"adjson":"{\"ads\":[{\"id\":1059112,\"ad_zone_id\":236,\"template\":\"web_word\",\"impression_tracks\":[\"https:\u002F\u002Fsugar.zhihu.com\u002Fplutus_adreaper?tu=https%3A%2F%2Faws.amazon.com%2Ffree%2Fstorage%2F%3Ftrk%3Dba_a134p000003ypeEAAQ%26trkCampaign%3Dacq_paid_media_cn%26sc_channel%3Dba%26sc_campaign%3Dacquisition_CN%26sc_publisher%3DZH%26sc_category%3DStorage%26sc_country%3DCN%26sc_geo%3DCHINA%26sc_outcome%3Dacq%26sc_detail%3Dkeyword%26sc_content%3Dad1%26sc_segment%3D400x224%26sc_medium%3DACQ_CHINA_ZH_TS_Mobile_SU_Storage_Solution_CN_CN_Image__\\u0026au=22961\\u0026ed=CjEEeB4wM30tHTNWBmJ7AkYmDHsAbm4kex1_BgEzLh0OdA1-AHM4dX9GZ1AXMTYNWXYPbFkqPn1_FWdeAGF-FhssBHkLc2twfwMxDgxhfQBYcA55HiAufX8DMQgMYGIBXnQLeQ50a3F3HGVSCWV1Fgk1BHkIc3wsOxhiQUQ5cQFTdhd4CHt0cXcdfF8GdjhDVnQPewpyb3Z5E2Fc3bQMwYoNnQ%3D%3D\\u0026ar=1\\u0026idi=8005\\u0026pf=0\\u0026ut=7f69e052724a410881b4163c8e1782c1\\u0026nt=0\\u0026pdi=1586771060311459\"],\"view_tracks\":[\"https:\u002F\u002Fsugar.zhihu.com\u002Fplutus_adreaper?au=22961\\u0026idi=8005\\u0026tu=https%3A%2F%2Faws.amazon.com%2Ffree%2Fstorage%2F%3Ftrk%3Dba_a134p000003ypeEAAQ%26trkCampaign%3Dacq_paid_media_cn%26sc_channel%3Dba%26sc_campaign%3Dacquisition_CN%26sc_publisher%3DZH%26sc_category%3DStorage%26sc_country%3DCN%26sc_geo%3DCHINA%26sc_outcome%3Dacq%26sc_detail%3Dkeyword%26sc_content%3Dad1%26sc_segment%3D400x224%26sc_medium%3DACQ_CHINA_ZH_TS_Mobile_SU_Storage_Solution_CN_CN_Image__\\u0026ed=CjEEeR4wM30tHTNWBmJ7AkYmDHsAbm4kex1_BgEzLh0OdA1-AHM4dX9GZ1AXMTYNWXYPbFkqPn1_FWdeAGF-FhssBHkLc2twfwMxDgxhfQBYcA55HiAufX8DMQgMYGIBXnQLeQ50a3F3HGVSCWV1Fgk1BHkIc3wsOxhiQUQ5cQFTdhd4CHt0cXcdfF8GdjhDVnQPewpyb3Z5E2FpaV0AIK55Kg%3D%3D\\u0026pf=0\\u0026pdi=1586771060311459\\u0026ut=7f69e052724a410881b4163c8e1782c1\\u0026nt=0\\u0026ar=1\"],\"click_tracks\":[\"https:\u002F\u002Fsugar.zhihu.com\u002Fplutus_adreaper?tu=https%3A%2F%2Faws.amazon.com%2Ffree%2Fstorage%2F%3Ftrk%3Dba_a134p000003ypeEAAQ%26trkCampaign%3Dacq_paid_media_cn%26sc_channel%3Dba%26sc_campaign%3Dacquisition_CN%26sc_publisher%3DZH%26sc_category%3DStorage%26sc_country%3DCN%26sc_geo%3DCHINA%26sc_outcome%3Dacq%26sc_detail%3Dkeyword%26sc_content%3Dad1%26sc_segment%3D400x224%26sc_medium%3DACQ_CHINA_ZH_TS_Mobile_SU_Storage_Solution_CN_CN_Image__\\u0026au=22961\\u0026idi=8005\\u0026nt=0\\u0026pdi=1586771060311459\\u0026ed=CjEEfh4wM30tHTNWBmJ7AkYmDHsAbm4kex1_BgEzLh0OdA1-AHM4dX9GZ1AXMTYNWXYPbFkqPn1_FWdeAGF-FhssBHkLc2twfwMxDgxhfQBYcA55HiAufX8DMQgMYGIBXnQLeQ50a3F3HGVSCWV1Fgk1BHkIc3wsOxhiQUQ5cQFTdhd4CHt0cXcdfF8GdjhDVnQPewpyb3Z5E2Gw0lVQQqEylA%3D%3D\\u0026pf=0\\u0026ar=1\\u0026ut=7f69e052724a410881b4163c8e1782c1\"],\"close_tracks\":[\"https:\u002F\u002Fsugar.zhihu.com\u002Fplutus_adreaper?pf=0\\u0026ut=7f69e052724a410881b4163c8e1782c1\\u0026nt=0\\u0026idi=8005\\u0026pdi=1586771060311459\\u0026ar=1\\u0026au=22961\\u0026tu=https%3A%2F%2Faws.amazon.com%2Ffree%2Fstorage%2F%3Ftrk%3Dba_a134p000003ypeEAAQ%26trkCampaign%3Dacq_paid_media_cn%26sc_channel%3Dba%26sc_campaign%3Dacquisition_CN%26sc_publisher%3DZH%26sc_category%3DStorage%26sc_country%3DCN%26sc_geo%3DCHINA%26sc_outcome%3Dacq%26sc_detail%3Dkeyword%26sc_content%3Dad1%26sc_segment%3D400x224%26sc_medium%3DACQ_CHINA_ZH_TS_Mobile_SU_Storage_Solution_CN_CN_Image__\\u0026ed=CjEEfR4wM30tHTNWBmJ7AkYmDHsAbm4kex1_BgEzLh0OdA1-AHM4dX9GZ1AXMTYNWXYPbFkqPn1_FWdeAGF-FhssBHkLc2twfwMxDgxhfQBYcA55HiAufX8DMQgMYGIBXnQLeQ50a3F3HGVSCWV1Fgk1BHkIc3wsOxhiQUQ5cQFTdhd4CHt0cXcdfF8GdjhDVnQPewpyb3Z5E2GtmUEtHfFxmQ%3D%3D\"],\"debug_tracks\":[\"https:\u002F\u002Fsugar.zhihu.com\u002Fplutus_adreaper?idi=8005\\u0026nt=0\\u0026ed=CjEEcx4wM30tHTNWBmJ7AkYmDHsAbm4kex1_BgEzLh0OdA1-AHM4dX9GZ1AXMTYNWXYPbFkqPn1_FWdeAGF-FhssBHkLc2twfwMxDgxhfQBYcA55HiAufX8DMQgMYGIBXnQLeQ50a3F3HGVSCWV1Fgk1BHkIc3wsOxhiQUQ5cQFTdhd4CHt0cXcdfF8GdjhDVnQPewpyb3Z5E2FpeBbQ5lDiDQ%3D%3D\\u0026ar=1\\u0026tu=https%3A%2F%2Faws.amazon.com%2Ffree%2Fstorage%2F%3Ftrk%3Dba_a134p000003ypeEAAQ%26trkCampaign%3Dacq_paid_media_cn%26sc_channel%3Dba%26sc_campaign%3Dacquisition_CN%26sc_publisher%3DZH%26sc_category%3DStorage%26sc_country%3DCN%26sc_geo%3DCHINA%26sc_outcome%3Dacq%26sc_detail%3Dkeyword%26sc_content%3Dad1%26sc_segment%3D400x224%26sc_medium%3DACQ_CHINA_ZH_TS_Mobile_SU_Storage_Solution_CN_CN_Image__\\u0026au=22961\\u0026pf=0\\u0026pdi=1586771060311459\\u0026ut=7f69e052724a410881b4163c8e1782c1\"],\"conversion_tracks\":[\"https:\u002F\u002Fsugar.zhihu.com\u002Fplutus_adreaper?pf=0\\u0026idi=8005\\u0026ar=1\\u0026au=22961\\u0026nt=0\\u0026tu=https%3A%2F%2Faws.amazon.com%2Ffree%2Fstorage%2F%3Ftrk%3Dba_a134p000003ypeEAAQ%26trkCampaign%3Dacq_paid_media_cn%26sc_channel%3Dba%26sc_campaign%3Dacquisition_CN%26sc_publisher%3DZH%26sc_category%3DStorage%26sc_country%3DCN%26sc_geo%3DCHINA%26sc_outcome%3Dacq%26sc_detail%3Dkeyword%26sc_content%3Dad1%26sc_segment%3D400x224%26sc_medium%3DACQ_CHINA_ZH_TS_Mobile_SU_Storage_Solution_CN_CN_Image__\\u0026pdi=1586771060311459\\u0026ed=CjEEfx4wM30tHTNWBmJ7AkYmDHsAbm4kex1_BgEzLh0OdA1-AHM4dX9GZ1AXMTYNWXYPbFkqPn1_FWdeAGF-FhssBHkLc2twfwMxDgxhfQBYcA55HiAufX8DMQgMYGIBXnQLeQ50a3F3HGVSCWV1Fgk1BHkIc3wsOxhiQUQ5cQFTdhd4CHt0cXcdfF8GdjhDVnQPewpyb3Z5E2GoUKtE5PL0TA%3D%3D\\u0026ut=7f69e052724a410881b4163c8e1782c1\"],\"extra_conversion_tracks\":{\"call_back\":[\"https:\u002F\u002Fsugar.zhihu.com\u002Fplutus_adreaper_callback?si=c8a17272-c518-4d58-a0cb-e14480b51c57\\u0026os=3\\u0026zid=236\\u0026zaid=1059112\\u0026zcid=1103573\\u0026cid=1103573\\u0026event=__EVENTTYPE__\\u0026value=__EVENTVALUE__\\u0026ts=__TIMESTAMP__\\u0026cts=__TS__\\u0026mh=__MEMBERHASHID__\"]},\"za_ad_info\":\"CKjSQBDsASIBMV0fL8BOYNWtQw==\",\"za_ad_info_json\":\"{\\\"ad_id\\\":1059112,\\\"ad_zone_id\\\":236,\\\"category\\\":\\\"1\\\",\\\"timestamp\\\":1612156800,\\\"creative_id\\\":1103573}\",\"creatives\":[{\"id\":1103573,\"asset\":{\"brand_name\":\"AWS\",\"brand_logo\":\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-6c915f1916327d2140ad2ed127ab705f_250x250.jpeg\",\"title\":\"哪里有免费的云存储解决方案？\",\"desc\":\"AWS提供全套免费云存储解决方案，为企业数字化转型助力! 6大免费套餐在云中部署存储和内容分发解决方案所需的免费产品和服务，让您的数据更安全。\",\"landing_url\":\"https:\u002F\u002Faws.amazon.com\u002Ffree\u002Fstorage\u002F?trk=ba_a134p000003ypeEAAQ\\u0026trkCampaign=acq_paid_media_cn\\u0026sc_channel=ba\\u0026sc_campaign=acquisition_CN\\u0026sc_publisher=ZH\\u0026sc_category=Storage\\u0026sc_country=CN\\u0026sc_geo=CHINA\\u0026sc_outcome=acq\\u0026sc_detail=keyword\\u0026sc_content=ad1\\u0026sc_segment=400x224\\u0026sc_medium=ACQ_CHINA_ZH_TS_Mobile_SU_Storage_Solution_CN_CN_Image__\",\"img_size\":0,\"cta\":\"查看详情\",\"native_asset\":{}}}],\"expand\":{\"display_advertising_tag\":true,\"is_new_webview\":true,\"is_cdn_speeding\":false,\"is_apk_market_direct\":false,\"interactive\":{\"deliver_time\":\"25 分钟前\",\"browse_string\":\"5.3 万\",\"participate_string\":\"120 \",\"slide_time_one\":3,\"slide_time_two\":-1,\"slide_end\":true}},\"experiment_info\":\"{}\",\"view_x_tracks\":[\"https:\u002F\u002Fsugar.zhihu.com\u002Fplutus_adreaper?ar=1\\u0026tu=https%3A%2F%2Faws.amazon.com%2Ffree%2Fstorage%2F%3Ftrk%3Dba_a134p000003ypeEAAQ%26trkCampaign%3Dacq_paid_media_cn%26sc_channel%3Dba%26sc_campaign%3Dacquisition_CN%26sc_publisher%3DZH%26sc_category%3DStorage%26sc_country%3DCN%26sc_geo%3DCHINA%26sc_outcome%3Dacq%26sc_detail%3Dkeyword%26sc_content%3Dad1%26sc_segment%3D400x224%26sc_medium%3DACQ_CHINA_ZH_TS_Mobile_SU_Storage_Solution_CN_CN_Image__\\u0026ut=7f69e052724a410881b4163c8e1782c1\\u0026nt=0\\u0026au=22961\\u0026pdi=1586771060311459\\u0026ed=CjEEewhlKSlzRmoGAGd-B1loWn8Je3d0KhBqSlBgL1JGIAh-DHtqInsUMVIGdi1KVncKfB4iMyRzFGJSCGF9Ak01UHcLcGpxfhR0BFhtfQFbdgx9C2U5NHMUdARebXweWnAIeAt1bXF_HGtQBGh5CU0nSXcLc2pmIlBvVxclJQ1afQpkCnNibn8cakkJZ2pEGHgIfAlxa3V4EmRUqevM4X0NmFA%3D\\u0026idi=8005\\u0026pf=0\"],\"mobile_experiment\":{\"ad_comm_70\":\"0\",\"ad_ht\":\"1\",\"ad_new_rt\":\"1\",\"ad_pre_web\":\"1\",\"ad_ps_ab\":\"0\",\"ad_sdk_skip\":\"1\",\"am_ad_logo\":\"0\",\"am_ad_video\":\"0\",\"am_adx_video\":\"1\",\"am_bid_ratio\":\"10000\",\"am_or_ad\":\"0\",\"am_test_ss\":\"0\",\"andr_pre_web\":\"2\",\"dd_send\":\"1\",\"dsp_replace\":\"1\",\"feed_adv_new\":\"1\",\"feed_advance\":\"0\",\"new_ad_logo\":\"0\",\"notify_page\":\"1\"}}]}"}},"advancedStyle":{},"commonAnswerCount":0,"hiddenAnswerCount":0,"meta":{},"bluestarRanklist":{},"relatedSearch":{},"autoInvitation":{},"simpleConcernedFollowers":{},"draftStatus":{},"disclaimers":{}},"shareTexts":{},"answers":{"voters":{},"copyrightApplicants":{},"favlists":{},"newAnswer":{},"concernedUpvoters":{},"simpleConcernedUpvoters":{},"paidContent":{},"settings":{}},"banner":{},"topic":{"bios":{},"hot":{},"newest":{},"top":{},"unanswered":{},"questions":{},"followers":{},"contributors":{},"parent":{},"children":{},"bestAnswerers":{},"wikiMeta":{},"index":{},"intro":{},"meta":{},"schema":{},"creatorWall":{},"wikiEditInfo":{},"committedWiki":{},"landingBasicData":{},"landingExcellentItems":[],"landingExcellentEditors":[],"landingCatalog":[],"landingEntries":{}},"explore":{"recommendations":{},"specials":{"entities":{},"order":[]},"roundtables":{"entities":{},"order":[]},"collections":{},"columns":{}},"articles":{"voters":{}},"favlists":{"relations":{}},"pins":{"reviewing":{}},"topstory":{"recommend":{"isFetching":false,"isDrained":false,"afterId":0,"items":[],"next":null},"follow":{"isFetching":false,"isDrained":false,"afterId":0,"items":[],"next":null},"room":{"meta":{},"isFetching":false,"afterId":0,"items":[],"next":null},"followWonderful":{"isFetching":false,"isDrained":false,"afterId":0,"items":[],"next":null},"sidebar":null,"announcement":{},"hotListCategories":[],"hotList":[],"guestFeeds":{"isFetching":false,"isDrained":false,"afterId":0,"items":[],"next":null},"followExtra":{"isNewUser":null,"isFetched":false,"followCount":0,"followers":[]},"hotDaily":{"data":[],"paging":{}},"hotHighlight":{"isFetching":false,"isDrained":false,"data":[],"paging":{}}},"upload":{},"video":{"data":{},"shareVideoDetail":{},"last":{}},"zvideos":{"campaigns":{},"tagoreCategory":[],"recommendations":{},"insertable":{},"recruit":{"form":{"platform":"","nickname":"","followerCount":"","domain":"","contact":""},"submited":false,"ranking":[]},"club":{}},"guide":{"guide":{"isFetching":false,"isShowGuide":false}},"reward":{"answer":{},"article":{},"question":{}},"search":{"recommendSearch":[],"topSearch":{},"searchValue":{},"suggestSearch":{},"attachedInfo":{},"nextOffset":{},"topicReview":{},"generalByQuery":{},"generalByQueryInADay":{},"generalByQueryInAWeek":{},"generalByQueryInThreeMonths":{},"peopleByQuery":{},"clubentityByQuery":{},"clubPostByQuery":{},"topicByQuery":{},"columnByQuery":{},"liveByQuery":{},"albumByQuery":{},"eBookByQuery":{},"kmGeneralByQuery":{}},"publicEditPermission":{},"vessay":{"blockUnload":true,"trackData":{"videoTrack":[],"audioTrack":[],"subtitleTrack":[]},"tracks":[],"materialLib":{"isLoading":true,"data":[],"paging":{"isEnd":false}},"playerStatus":{"currentTime":0,"totalTime":0,"inited":false,"playing":false},"baiduAI":{"accessToken":null}},"vessayLoading":{"isLoading":false,"text":""},"readStatus":{},"draftHistory":{"history":{},"drafts":{}},"notifications":{"recent":{"isFetching":false,"isDrained":false,"isPrevDrained":false,"result":[],"next":null,"key":null},"history":{"isFetching":false,"isDrained":false,"isPrevDrained":false,"result":[],"next":null,"key":null},"notificationActors":{"isFetching":false,"isDrained":false,"isPrevDrained":false,"result":[],"next":null,"key":null},"recentNotificationEntry":"all"},"specials":{"entities":{},"all":{"data":[],"paging":{},"isLoading":false}},"collections":{"hot":{"data":[],"paging":{},"isLoading":false},"collectionFeeds":{}},"userProfit":{"permission":{"permissionStatus":{"zhiZixuan":0,"recommend":-1,"task":0,"plugin":0},"visible":false}},"mcn":{"bindInfo":{},"memberCategoryList":[],"producerList":[],"categoryList":[],"lists":{},"banners":{},"protocolStatus":{"isAgreedNew":true,"isAgreedOld":true},"probationCountdownDays":0},"mcnActivity":{"household":{"products":{},"rankList":{"total":{},"yesterday":{}}}},"brand":{"contentPlugin":{}},"host":{"roundtable":{"subjects":{},"applications":{"total":0},"online":{"total":0},"applies":{},"details":{},"includedResource":{},"hotQuestions":{},"warmupContents":{},"batchInclude":{}},"special":{"applications":{"total":0,"pages":{},"entities":{}},"censorHistory":{},"drafts":{}}},"campaign":{"single":{},"list":{},"videoMakerAcq":{},"vote":{},"cardCollecting":{"message":null,"profile":{"balance":"0","chance":0,"coinNum":0,"gatherClose":false,"isGotMagicCard":false,"isPay":false,"partitionStart":false,"totalDone":0,"withdrawStart":false},"sharePoster":{"share":"","sendCard":"","invite":""},"shareLink":null,"shareIntention":"share","shareKey":null,"shareCardId":null,"inviterInfo":null,"giverInfo":null,"prize":null,"receivedCard":null,"newCoinCount":null,"newCardList":[],"newUserCardCount":1,"taskList":[],"prizeList":null,"cardList":null,"panel":{"showTaskPanel":false,"showRewardPanel":false},"modal":{"showWelcomeModal":false,"showFusionModal":false,"showFusionPromptModal":false,"showShareModal":false,"showBackModal":false}},"zhiboPandian2020":null},"knowledgePlan":{"lists":{},"allCreationRankList":{},"featuredQuestions":{}},"wallE":{"protectHistory":{"total":0,"pages":{},"entities":{}}},"roundtables":{"hotQuestions":{},"warmupContents":{},"hotDiscussions":{},"selectedContents":{},"roundtables":{}},"helpCenter":{"entities":{"question":{},"category":{}},"categories":[],"commonQuestions":[],"relatedQuestions":{}},"republish":{},"commercialReport":{"commercialTypes":[]},"creatorMCN":{"mcn":{},"mcnStatistics":{},"isNoAuth":false,"creatorManageData":[],"creatorManageDataTotal":1,"mcnDomains":[]}},"subAppName":"main"}</script><script src="https://static.zhihu.com/heifetz/vendor.8d94b1270b86debd0e1c.js"></script><script src="https://static.zhihu.com/heifetz/main.app.57143b1f6c8a14d14927.js"></script><script src="https://static.zhihu.com/heifetz/main.question-routes.59fedec2e90786b88bc3.js"></script></body><script src="https://hm.baidu.com/hm.js?98beee57fd2ef70ccdd5ca52b9740c49" async=""></script></html>